<!DOCTYPE html>
<!-- Generated by pkgdown: do not edit by hand --><html lang="fr">
<head>
<meta http-equiv="Content-Type" content="text/html; charset=UTF-8">
<meta charset="utf-8">
<meta http-equiv="X-UA-Compatible" content="IE=edge">
<meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">
<meta name="description" content="didoscalim">
<title>Compléments sur les mises à jour • didoscalim</title>
<script src="../deps/jquery-3.6.0/jquery-3.6.0.min.js"></script><meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">
<link href="../deps/bootstrap-5.2.2/bootstrap.min.css" rel="stylesheet">
<script src="../deps/bootstrap-5.2.2/bootstrap.bundle.min.js"></script><!-- Font Awesome icons --><link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/5.12.1/css/all.min.css" integrity="sha256-mmgLkCYLUQbXn0B1SRqzHar6dCnv9oZFPEC1g1cwlkk=" crossorigin="anonymous">
<link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/5.12.1/css/v4-shims.min.css" integrity="sha256-wZjR52fzng1pJHwx4aV2AO3yyTOXrcDW7jBpJtTwVxw=" crossorigin="anonymous">
<!-- bootstrap-toc --><script src="https://cdn.jsdelivr.net/gh/afeld/bootstrap-toc@v1.0.1/dist/bootstrap-toc.min.js" integrity="sha256-4veVQbu7//Lk5TSmc7YV48MxtMy98e26cf5MrgZYnwo=" crossorigin="anonymous"></script><!-- headroom.js --><script src="https://cdnjs.cloudflare.com/ajax/libs/headroom/0.11.0/headroom.min.js" integrity="sha256-AsUX4SJE1+yuDu5+mAVzJbuYNPHj/WroHuZ8Ir/CkE0=" crossorigin="anonymous"></script><script src="https://cdnjs.cloudflare.com/ajax/libs/headroom/0.11.0/jQuery.headroom.min.js" integrity="sha256-ZX/yNShbjqsohH1k95liqY9Gd8uOiE1S4vZc+9KQ1K4=" crossorigin="anonymous"></script><!-- clipboard.js --><script src="https://cdnjs.cloudflare.com/ajax/libs/clipboard.js/2.0.6/clipboard.min.js" integrity="sha256-inc5kl9MA1hkeYUt+EC3BhlIgyp/2jDIyBLS6k3UxPI=" crossorigin="anonymous"></script><!-- search --><script src="https://cdnjs.cloudflare.com/ajax/libs/fuse.js/6.4.6/fuse.js" integrity="sha512-zv6Ywkjyktsohkbp9bb45V6tEMoWhzFzXis+LrMehmJZZSys19Yxf1dopHx7WzIKxr5tK2dVcYmaCk2uqdjF4A==" crossorigin="anonymous"></script><script src="https://cdnjs.cloudflare.com/ajax/libs/autocomplete.js/0.38.0/autocomplete.jquery.min.js" integrity="sha512-GU9ayf+66Xx2TmpxqJpliWbT5PiGYxpaG8rfnBEk1LL8l1KGkRShhngwdXK1UgqhAzWpZHSiYPc09/NwDQIGyg==" crossorigin="anonymous"></script><script src="https://cdnjs.cloudflare.com/ajax/libs/mark.js/8.11.1/mark.min.js" integrity="sha512-5CYOlHXGh6QpOFA/TeTylKLWfB3ftPsde7AnmhuitiTX4K5SqCLBeKro6sPS8ilsz1Q4NRx3v8Ko2IBiszzdww==" crossorigin="anonymous"></script><!-- pkgdown --><script src="../pkgdown.js"></script><meta property="og:title" content="Compléments sur les mises à jour">
<meta property="og:description" content="didoscalim">
<!-- mathjax --><script src="https://cdnjs.cloudflare.com/ajax/libs/mathjax/2.7.5/MathJax.js" integrity="sha256-nvJJv9wWKEm88qvoQl9ekL2J+k/RWIsaSScxxlsrv8k=" crossorigin="anonymous"></script><script src="https://cdnjs.cloudflare.com/ajax/libs/mathjax/2.7.5/config/TeX-AMS-MML_HTMLorMML.js" integrity="sha256-84DKXVJXs0/F8OTMzX4UR909+jtl4G7SPypPavF+GfA=" crossorigin="anonymous"></script><!--[if lt IE 9]>
<script src="https://oss.maxcdn.com/html5shiv/3.7.3/html5shiv.min.js"></script>
<script src="https://oss.maxcdn.com/respond/1.4.2/respond.min.js"></script>
<![endif]-->
</head>
<body>
    <a href="#main" class="visually-hidden-focusable">Passer au contenu</a>
    

    <nav class="navbar fixed-top navbar-light navbar-expand-lg bg-light"><div class="container">
    
    <a class="navbar-brand me-2" href="../index.html">didoscalim</a>

    <small class="nav-text text-muted me-auto" data-bs-toggle="tooltip" data-bs-placement="bottom" title="">0.1.4.9000</small>

    
    <button class="navbar-toggler" type="button" data-bs-toggle="collapse" data-bs-target="#navbar" aria-controls="navbar" aria-expanded="false" aria-label="Activer la navigation">
      <span class="navbar-toggler-icon"></span>
    </button>

    <div id="navbar" class="collapse navbar-collapse ms-3">
      <ul class="navbar-nav me-auto">
<li class="nav-item">
  <a class="nav-link" href="../reference/index.html">Référence</a>
</li>
<li class="active nav-item dropdown">
  <a href="#" class="nav-link dropdown-toggle" data-bs-toggle="dropdown" role="button" aria-expanded="false" aria-haspopup="true" id="dropdown-articles">Articles</a>
  <div class="dropdown-menu" aria-labelledby="dropdown-articles">
    <a class="dropdown-item" href="../articles/charger-et-mettre-a-jour-des-donnees.html">Charger et mettre à jour des données</a>
    <a class="dropdown-item" href="../articles/complements-sur-les-mises-a-jour.html">Compléments sur les mises à jour</a>
    <a class="dropdown-item" href="../articles/csv-augmente.html">Générer un fichier csv augmenté</a>
    <a class="dropdown-item" href="../articles/les-environnements.html">Configurer et utiliser les environnements</a>
    <a class="dropdown-item" href="../articles/valider-un-fichier.html">Valider un fichier de données à importer</a>
  </div>
</li>
<li class="nav-item">
  <a class="nav-link" href="../news/index.html">Changements</a>
</li>
      </ul>
<form class="form-inline my-2 my-lg-0" role="search">
        <input type="search" class="form-control me-sm-2" aria-label="Activer la navigation" name="search-input" data-search-index="../search.json" id="search-input" placeholder="Rechercher" autocomplete="off">
</form>

      <ul class="navbar-nav">
<li class="nav-item">
  <a class="external-link nav-link" href="https://github.com/MTES-MCT/didoscalim/" aria-label="github">
    <span class="fab fa fab fa-github fa-lg"></span>
     
  </a>
</li>
      </ul>
</div>

    
  </div>
</nav><div class="container template-article">




<div class="row">
  <main id="main" class="col-md-9"><div class="page-header">
      <img src="" class="logo" alt=""><h1>Compléments sur les mises à jour</h1>
            
      
      <small class="dont-index">Source : <a href="https://github.com/MTES-MCT/didoscalim/blob/HEAD/vignettes/complements-sur-les-mises-a-jour.Rmd" class="external-link"><code>vignettes/complements-sur-les-mises-a-jour.Rmd</code></a></small>
      <div class="d-none name"><code>complements-sur-les-mises-a-jour.Rmd</code></div>
    </div>

    
    
<div class="sourceCode" id="cb1"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="kw"><a href="https://rdrr.io/r/base/library.html" class="external-link">library</a></span><span class="op">(</span><span class="va"><a href="https://mtes-mct.github.io/didoscalim/">didoscalim</a></span><span class="op">)</span></span>
<span><span class="co">#&gt; <span style="color: #BB0000;">✖</span> Environnement DiDo actif : DEV</span></span></code></pre></div>
<div class="section level2">
<h2 id="comment-fonctionne-les-fonctions-add_or_update_">Comment fonctionne les fonctions <code>add_or_update_*</code><a class="anchor" aria-label="anchor" href="#comment-fonctionne-les-fonctions-add_or_update_"></a>
</h2>
<p>Les fonctions <code>add_or_update_*</code> recherche l’objet en
comparant le paramètre <code>title</code> que vous passez avec les
titres des objets.</p>
<p>Avant comparaison, le paramètre <code>title</code> et les titres sont
passés en minuscule en conservant uniquement les caractères
alphanumériques (y compris accentués). La chaine “UN É &amp; UN À.”
deviendra donc “unéunà”.</p>
<div class="sourceCode" id="cb2"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="va">dataset1</span> <span class="op">&lt;-</span> <span class="fu"><a href="../reference/add_or_update_dataset.html">add_or_update_dataset</a></span><span class="op">(</span></span>
<span>  title <span class="op">=</span> <span class="st">"données sur l'évolution des eaux de surface"</span>,</span>
<span>  description <span class="op">=</span> <span class="st">"Un jeu de données de test"</span>,</span>
<span>  frequency <span class="op">=</span> <span class="st">"unknown"</span>,</span>
<span>  topic <span class="op">=</span> <span class="st">"Transports"</span></span>
<span><span class="op">)</span></span>
<span><span class="co">#&gt; dataset `données sur l'évolution des eaux de surface` créé</span></span>
<span></span>
<span><span class="va">dataset2</span> <span class="op">&lt;-</span> <span class="fu"><a href="../reference/add_or_update_dataset.html">add_or_update_dataset</a></span><span class="op">(</span></span>
<span>  title <span class="op">=</span> <span class="st">"Données sur l'évolution des eaux de surface."</span>,</span>
<span>  description <span class="op">=</span> <span class="st">"Un jeu de données de test"</span>,</span>
<span>  frequency <span class="op">=</span> <span class="st">"unknown"</span>,</span>
<span>  topic <span class="op">=</span> <span class="st">"Logement"</span></span>
<span><span class="op">)</span></span>
<span><span class="co">#&gt; dataset `Données sur l'évolution des eaux de surface.` créé</span></span>
<span><span class="va">dataset1</span><span class="op">$</span><span class="va">id</span> <span class="op">==</span> <span class="va">dataset2</span><span class="op">$</span><span class="va">id</span></span>
<span><span class="co">#&gt; [1] FALSE</span></span>
<span></span>
<span><span class="va">dataset1</span><span class="op">$</span><span class="va">title</span></span>
<span><span class="co">#&gt; [1] "données sur l'évolution des eaux de surface"</span></span>
<span><span class="va">dataset1</span><span class="op">$</span><span class="va">topic</span></span>
<span><span class="co">#&gt; [1] "Transports"</span></span>
<span></span>
<span><span class="va">dataset2</span><span class="op">$</span><span class="va">title</span></span>
<span><span class="co">#&gt; [1] "Données sur l'évolution des eaux de surface."</span></span>
<span><span class="va">dataset2</span><span class="op">$</span><span class="va">topic</span></span>
<span><span class="co">#&gt; [1] "Logement"</span></span></code></pre></div>
</div>
<div class="section level2">
<h2 id="méthodes-avancées">Méthodes avancées<a class="anchor" aria-label="anchor" href="#m%C3%A9thodes-avanc%C3%A9es"></a>
</h2>
<p>La fonction de comparaison de base ne permet de modifier le titre
d’un objet qu’à la marge (transformer une minuscule en majuscule,
ajouter ou supprimer une ponctuation…).</p>
<p>Si, pour une raison quelconque, vous avez besoin de modifier ce titre
de façon plus importante (par exemple pour corriger un titre), vous
pouvez remplacer temporairement la méthode de base par votre propre
méthode de comparaison en fixant l’option
<code>didoscalim_title_comparison</code>.</p>
<p>La méthode s’applique sur la chaine “nettoyée” (passage en minuscule
et conservation des caractères alphanumériques).</p>
<p>En exemple, la fonction suivante, qui s’appuie sur la librairie
{stringdist}, permet de rechercher les titres qui ont une différence de
3 caractères maximum :</p>
<div class="sourceCode" id="cb3"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="kw"><a href="https://rdrr.io/r/base/library.html" class="external-link">library</a></span><span class="op">(</span><span class="va"><a href="https://withr.r-lib.org" class="external-link">withr</a></span><span class="op">)</span></span>
<span><span class="kw"><a href="https://rdrr.io/r/base/library.html" class="external-link">library</a></span><span class="op">(</span><span class="va"><a href="https://github.com/markvanderloo/stringdist" class="external-link">stringdist</a></span><span class="op">)</span></span>
<span></span>
<span><span class="fu">withr</span><span class="fu">::</span><span class="fu"><a href="https://withr.r-lib.org/reference/with_options.html" class="external-link">local_options</a></span><span class="op">(</span><span class="fu"><a href="https://rdrr.io/r/base/list.html" class="external-link">list</a></span><span class="op">(</span>didoscalim_title_comparison <span class="op">=</span> <span class="kw">function</span><span class="op">(</span><span class="va">column</span>, <span class="va">string</span><span class="op">)</span> <span class="op">{</span></span>
<span>  <span class="fu"><a href="https://rdrr.io/pkg/stringdist/man/stringdist.html" class="external-link">stringdist</a></span><span class="op">(</span><span class="va">column</span>, <span class="va">string</span><span class="op">)</span> <span class="op">&lt;=</span> <span class="fl">3</span></span>
<span><span class="op">}</span><span class="op">)</span><span class="op">)</span></span>
<span></span>
<span><span class="va">dataset1</span> <span class="op">&lt;-</span> <span class="fu"><a href="../reference/add_or_update_dataset.html">add_or_update_dataset</a></span><span class="op">(</span></span>
<span>  title <span class="op">=</span> <span class="st">"données sur l'évolution des espèce"</span>,</span>
<span>  description <span class="op">=</span> <span class="st">"Un jeu de données de test"</span>,</span>
<span>  frequency <span class="op">=</span> <span class="st">"unknown"</span>,</span>
<span>  topic <span class="op">=</span> <span class="st">"Transports"</span></span>
<span><span class="op">)</span></span>
<span><span class="co">#&gt; dataset `données sur l'évolution des espèce` créé</span></span>
<span></span>
<span><span class="va">dataset2</span> <span class="op">&lt;-</span> <span class="fu"><a href="../reference/add_or_update_dataset.html">add_or_update_dataset</a></span><span class="op">(</span></span>
<span>  title <span class="op">=</span> <span class="st">"Données sur l'évolution des espèces."</span>,</span>
<span>  description <span class="op">=</span> <span class="st">"Un jeu de données de test"</span>,</span>
<span>  frequency <span class="op">=</span> <span class="st">"unknown"</span>,</span>
<span>  topic <span class="op">=</span> <span class="st">"Transports"</span></span>
<span><span class="op">)</span></span>
<span><span class="co">#&gt; dataset `Données sur l'évolution des espèces.` créé</span></span>
<span></span>
<span><span class="va">dataset1</span><span class="op">$</span><span class="va">id</span> <span class="op">==</span> <span class="va">dataset2</span><span class="op">$</span><span class="va">id</span></span>
<span><span class="co">#&gt; [1] FALSE</span></span>
<span><span class="va">dataset1</span><span class="op">$</span><span class="va">title</span></span>
<span><span class="co">#&gt; [1] "données sur l'évolution des espèce"</span></span>
<span><span class="va">dataset2</span><span class="op">$</span><span class="va">title</span></span>
<span><span class="co">#&gt; [1] "Données sur l'évolution des espèces."</span></span></code></pre></div>
<p>Dans ce cas, il est <strong>fortement</strong> conseillé d’utiliser
l’option <code>didoscalim_update_only</code> afin d’éviter de créer des
objets par erreur.</p>
<div class="sourceCode" id="cb4"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span></span>
<span><span class="fu"><a href="../reference/didoscalim_update_only.html">didoscalim_update_only</a></span><span class="op">(</span><span class="cn">TRUE</span><span class="op">)</span></span>
<span><span class="co">#&gt; Error in didoscalim_update_only(TRUE): impossible de trouver la fonction "didoscalim_update_only"</span></span>
<span>                    </span>
<span><span class="va">dataset</span> <span class="op">&lt;-</span> <span class="fu"><a href="../reference/add_or_update_dataset.html">add_or_update_dataset</a></span><span class="op">(</span></span>
<span>  title <span class="op">=</span> <span class="st">"Données sur l'évolution des écosystèmes."</span>,</span>
<span>  description <span class="op">=</span> <span class="st">"Un jeu de données de test"</span>,</span>
<span>  frequency <span class="op">=</span> <span class="st">"unknown"</span>,</span>
<span>  topic <span class="op">=</span> <span class="st">"Transports"</span>  </span>
<span><span class="op">)</span></span>
<span><span class="co">#&gt; dataset `Données sur l'évolution des écosystèmes.` créé</span></span></code></pre></div>
</div>
  </main><aside class="col-md-3"><nav id="toc"><h2>Sur cette page</h2>
    </nav></aside>
</div>



    <footer><div class="pkgdown-footer-left">
  <p></p>
<p>Développé par Nicolas Chuche.</p>
</div>

<div class="pkgdown-footer-right">
  <p></p>
<p>Site créé avec <a href="https://pkgdown.r-lib.org/" class="external-link">pkgdown</a> 2.0.7.</p>
</div>

    </footer>
</div>

  

  

  </body>
</html>
