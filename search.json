[{"path":"https://mtes-mct.github.io/didoscalim/articles/charger-et-mettre-a-jour-des-donnees.html","id":"lexemple","dir":"Articles","previous_headings":"","what":"L’exemple","title":"Charger et mettre à jour des données","text":"Nous souhaitons créer un jeu de données contenant 2 fichiers de données. les fichiers de données sont mis à jour tous les mois. les mises à jour ont lieu le 10 de chaque mois. les données sont cumulatives (donc la date de début de couverture temporelle ne change pas). La procédure à suivre est la suivante : créer ou modifier le jeu de données en modifiant la date de fin de couverture temporelle et la date de prochaine mise à jour créer les fichiers de données ou remplacer les millésimes en modifiant la date de publication et la date de fin de couverture temporelle Dans les éléments supplémentaires : le millésime est le jours/mois de publication des données au format AAAA-MM. ne souhaite pas conserver les anciens millésimes.","code":""},{"path":"https://mtes-mct.github.io/didoscalim/articles/charger-et-mettre-a-jour-des-donnees.html","id":"créer-le-jeu-de-données","dir":"Articles","previous_headings":"L’exemple","what":"créer le jeu de données","title":"Charger et mettre à jour des données","text":"frequency_date représente la date de prochaine mise à jour, c’est une valeur fixée au niveau du jeu de données. temporal_coverage_start et temporal_coverage_end représente respectivement les dates de début et de fin de la couverture temporelle. Elles sont fixées au niveau du jeux de données et également au niveau des fichiers de données.","code":"# ces variables vont évoluer dans le temps temporal_coverage_end <- \"2020-05-31\" frequency_date <- \"2020-06-10\" millesime <- \"2020-06\"  # cette variable ne change jamais temporal_coverage_start <- \"2000-01-01\"  dataset <- add_or_update_dataset(   title = \"Données de consommation mensuelles fictive\",   description = \"test\",   topic = \"Énergie\",   temporal_coverage_start = temporal_coverage_start,   temporal_coverage_end = temporal_coverage_end,   frequency = \"monthly\",   frequency_date = frequency_date ) #> dataset `Données de consommation mensuelles fictive` créé"},{"path":"https://mtes-mct.github.io/didoscalim/articles/charger-et-mettre-a-jour-des-donnees.html","id":"créer-les-fichiers-de-données","dir":"Articles","previous_headings":"L’exemple","what":"créer les fichiers de données","title":"Charger et mettre à jour des données","text":"Le paramètre keep_old_millesimes permet d’indiquer que le méthode doit conserver 0 anciens millésimes, par conséquent elle va supprimer tous les anciens millésimes. Vous pouvez également passer l’argument check_file_date à TRUE, la méthode vérifiera si le fichier est plus récent que la dernière modification du datafile et si ça n’est pas le cas retournera sans réaliser la mise à jour.","code":"add_or_update_datafile(   dataset = dataset,   title = \"Données de consommation fictive – chaleur et froid\",   description = \"Consommations annuelles et nombre de points de livraison\",   file_name = \"augmente.csv\",   temporal_coverage_start = temporal_coverage_start,   temporal_coverage_end = temporal_coverage_end,   millesime = millesime,   keep_old_millesimes = 0 ) #>     intégration du fichier `augmente.csv` #>  * fichier versé #>  * fichier validé #>  * fichier intégré:   rid: 41945d6d-b710-4521-83bb-c63f8937d6c1   millesime: 2020-06  lignes: 20  add_or_update_datafile(   dataset = dataset,   title = \"Données de consommation fictive – gaz et électricité\",   description = \"Consommations annuelles et nombre de points de livraison\",   file_name = \"augmente.csv\",   temporal_coverage_start = temporal_coverage_start,   temporal_coverage_end = temporal_coverage_end,   millesime = millesime,   keep_old_millesimes = 0 ) #>     intégration du fichier `augmente.csv` #>  * fichier versé #>  * fichier validé #>  * fichier intégré:   rid: 1a4fd93b-59f8-4417-a84f-6eaf93468f6c   millesime: 2020-06  lignes: 20"},{"path":"https://mtes-mct.github.io/didoscalim/articles/charger-et-mettre-a-jour-des-donnees.html","id":"réaliser-les-mises-à-jour","dir":"Articles","previous_headings":"L’exemple","what":"Réaliser les mises à jour","title":"Charger et mettre à jour des données","text":"La procédure est la suivante : modifier le jeu de données en modifiant la date de fin de couverture temporelle et la date de prochaine mise à jour ajouter des données aux fichiers de données ou remplacer les millésimes et modifier la date de fin de couverture temporelle Pour ces mises à jour, il suffira de modifier la déclaration des variables d’entêtes et de reprendre le code précédent, les fonctions add_or_update_* s’occupent de tout le reste. Pour publier les données allant jusqu’au 30 juin le code est le suivant :","code":"# nouvelle date de fin temporal_coverage_end <- \"2020-06-30\" # nouvelle date de mise à jour frequency_date <- \"2020-07-10\" # nouvel identifiant de millésime millesime <- \"2020-07\"  # toute la suite est strictement identique au code ci-dessus. temporal_coverage_start <- \"2000-01-01\"  dataset <- add_or_update_dataset(   title = \"Données de consommation mensuelles fictive\",   description = \"test\",   topic = \"Énergie\",   temporal_coverage_start = temporal_coverage_start,   temporal_coverage_end = temporal_coverage_end,   frequency = \"monthly\",   frequency_date = frequency_date ) #> dataset \"Données de consommation mensuelles fictive\" modifié  add_or_update_datafile(   dataset = dataset,   title = \"Données de consommation fictive – chaleur et froid\",   description = \"Consommations annuelles et nombre de points de livraison\",   file_name = \"augmente.csv\",   temporal_coverage_start = temporal_coverage_start,   temporal_coverage_end = temporal_coverage_end,   millesime = millesime,   keep_old_millesimes = 1 ) #>     intégration du fichier `augmente.csv` #>  * fichier versé #>  * fichier validé #>  * fichier intégré:   rid: 41945d6d-b710-4521-83bb-c63f8937d6c1   millesime: 2020-07  lignes: 20 #> datafile \"Données de consommation fictive – chaleur et froid\" modifié  add_or_update_datafile(   dataset = dataset,   title = \"Données de consommation fictive – gaz et électricité\",   description = \"Consommations annuelles et nombre de points de livraison\",   file_name = \"augmente.csv\",   temporal_coverage_start = temporal_coverage_start,   temporal_coverage_end = temporal_coverage_end,   millesime = millesime,   keep_old_millesimes = 1 ) #>     intégration du fichier `augmente.csv` #>  * fichier versé #>  * fichier validé #>  * fichier intégré:   rid: 1a4fd93b-59f8-4417-a84f-6eaf93468f6c   millesime: 2020-07  lignes: 20 #> datafile \"Données de consommation fictive – gaz et électricité\" modifié"},{"path":"https://mtes-mct.github.io/didoscalim/articles/charger-et-mettre-a-jour-des-donnees.html","id":"le-programme-final","dir":"Articles","previous_headings":"L’exemple","what":"Le programme final","title":"Charger et mettre à jour des données","text":"Le code précédent est un exemple, il doit entre autre pouvoir vous montrer comment se passe une création et une mise à jour et pour cela, un millésime devant être unique, il doit modifier l’identifiant du millésime à chaque étape. Une fois que votre programme est prêt, vous pouvez automatiser la génération des variables temporal_coverage_end et frequency_date et supprimer la variable et les paramêtres millesime, add_or_update_datafile() le fixe automatiquemeent à AAAA-MM avec l’année et le mois en cours si elle n’est pas précisée. Cela donne le code final suivant que vous pouvez lancer tous les mois :","code":"library(lubridate, warn.conflicts = FALSE)  # prend la date du dernier jour du mois précédent temporal_coverage_end <- ceiling_date(Sys.Date() %m-% months(1), 'month') %m-% days(1) # prend la date du 9eme jour après le 1er du mois en cours # cette implémentation est naïve, attention aux jours non travaillés... frequency_date <- ceiling_date(Sys.Date(), 'month') + days(9) # cette variable n'est pas indispensable millesime = format(Sys.time(), \"%Y-%m\")  # la suite est strictement identique au code précédent. temporal_coverage_start <- \"2000-01-01\"  dataset <- add_or_update_dataset(   title = \"Données de consommation mensuelles fictive\",   description = \"test\",   topic = \"Énergie\",   temporal_coverage_start = temporal_coverage_start,   temporal_coverage_end = temporal_coverage_end,   frequency = \"monthly\",   frequency_date = frequency_date ) #> dataset \"Données de consommation mensuelles fictive\" modifié  add_or_update_datafile(   dataset = dataset,   title = \"Données de consommation fictive – chaleur et froid\",   description = \"Consommations annuelles et nombre de points de livraison\",   file_name = \"augmente.csv\",   temporal_coverage_start = temporal_coverage_start,   temporal_coverage_end = temporal_coverage_end,   millesime = millesime,   keep_old_millesimes = 1 ) #>     intégration du fichier `augmente.csv` #>  * fichier versé #>  * fichier validé #>  * fichier intégré:   rid: 41945d6d-b710-4521-83bb-c63f8937d6c1   millesime: 2023-10  lignes: 20 #> datafile \"Données de consommation fictive – chaleur et froid\" modifié #> suppression du millesime `653b8af15a03db3b885ae743` `41945d6d-b710-4521-83bb-c63f8937d6c1` `2020-06`  add_or_update_datafile(   dataset = dataset,   title = \"Données de consommation fictive – gaz et électricité\",   description = \"Consommations annuelles et nombre de points de livraison\",   file_name = \"augmente.csv\",   temporal_coverage_start = temporal_coverage_start,   temporal_coverage_end = temporal_coverage_end,   millesime = millesime,   keep_old_millesimes = 1 ) #>     intégration du fichier `augmente.csv` #>  * fichier versé #>  * fichier validé #>  * fichier intégré:   rid: 1a4fd93b-59f8-4417-a84f-6eaf93468f6c   millesime: 2023-10  lignes: 20 #> datafile \"Données de consommation fictive – gaz et électricité\" modifié #> suppression du millesime `653b8af15a03db3b885ae743` `1a4fd93b-59f8-4417-a84f-6eaf93468f6c` `2020-06`"},{"path":"https://mtes-mct.github.io/didoscalim/articles/charger-et-mettre-a-jour-des-donnees.html","id":"éviter-la-création-dun-objet-quand-vous-voulez-faire-des-mises-à-jour","dir":"Articles","previous_headings":"L’exemple","what":"éviter la création d’un objet quand vous voulez faire des mises à jour","title":"Charger et mettre à jour des données","text":"Si vos datasets/datafiles sont « stables » et qu’ils doivent juste être mis à jour, vous pouvez utiliser l’option didoscalim_update_only. Les fonctions add_or_update_* lèveront une exception si elles doivent créer un nouvel objet","code":"withr::local_options(didoscalim_update_only = TRUE)  dataset <- add_or_update_dataset(   title = \"Données de consommation mensuelles fictive.\",   description = \"test\",   topic = \"Énergie\",   temporal_coverage_start = temporal_coverage_start,   temporal_coverage_end = temporal_coverage_end,   frequency = \"monthly\",   frequency_date = frequency_date ) #> dataset `Données de consommation mensuelles fictive.` créé   dataset <- add_or_update_dataset(   title = \"Un dataset quelconque\",   description = \"test\",   topic = \"Énergie\",   frequency = \"monthly\",   frequency_date = frequency_date ) #> dataset `Un dataset quelconque` créé"},{"path":"https://mtes-mct.github.io/didoscalim/articles/charger-et-mettre-a-jour-des-donnees.html","id":"quelques-conseils","dir":"Articles","previous_headings":"L’exemple","what":"quelques conseils","title":"Charger et mettre à jour des données","text":"utilisez l’option didoscalim_update_only quand vous ne devez faire que des mises à jours. Lancez toujours le programme sur l’environnement ECOLE pour vérifier que vos fichiers sont correctements formatés. Si vous rencontrez un problème sur l’environnement ecole, vous pouvez supprimer entièrement le dataset et relancer l’intégration jusqu’à la correction de vos erreurs.","code":""},{"path":"https://mtes-mct.github.io/didoscalim/articles/complements-sur-les-mises-a-jour.html","id":"comment-fonctionne-les-fonctions-add_or_update_","dir":"Articles","previous_headings":"","what":"Comment fonctionne les fonctions add_or_update_*","title":"Compléments sur les mises à jour","text":"Les fonctions add_or_update_* recherche l’objet en comparant le paramètre title que vous passez avec les titres des objets. Avant comparaison, le paramètre title et les titres sont passés en minuscule en conservant uniquement les caractères alphanumériques (y compris accentués). La chaine “UN É & UN À.” deviendra donc “unéunà”.","code":"dataset1 <- add_or_update_dataset(   title = \"données sur l'évolution des eaux de surface\",   description = \"Un jeu de données de test\",   frequency = \"unknown\",   topic = \"Transports\" ) #> dataset `données sur l'évolution des eaux de surface` créé  dataset2 <- add_or_update_dataset(   title = \"Données sur l'évolution des eaux de surface.\",   description = \"Un jeu de données de test\",   frequency = \"unknown\",   topic = \"Logement\" ) #> dataset `Données sur l'évolution des eaux de surface.` créé dataset1$id == dataset2$id #> [1] FALSE  dataset1$title #> [1] \"données sur l'évolution des eaux de surface\" dataset1$topic #> [1] \"Transports\"  dataset2$title #> [1] \"Données sur l'évolution des eaux de surface.\" dataset2$topic #> [1] \"Logement\""},{"path":"https://mtes-mct.github.io/didoscalim/articles/complements-sur-les-mises-a-jour.html","id":"méthodes-avancées","dir":"Articles","previous_headings":"","what":"Méthodes avancées","title":"Compléments sur les mises à jour","text":"La fonction de comparaison de base ne permet de modifier le titre d’un objet qu’à la marge (transformer une minuscule en majuscule, ajouter ou supprimer une ponctuation…). Si, pour une raison quelconque, vous avez besoin de modifier ce titre de façon plus importante (par exemple pour corriger un titre), vous pouvez remplacer temporairement la méthode de base par votre propre méthode de comparaison en fixant l’option didoscalim_title_comparison. La méthode s’applique sur la chaine “nettoyée” (passage en minuscule et conservation des caractères alphanumériques). En exemple, la fonction suivante, qui s’appuie sur la librairie {stringdist}, permet de rechercher les titres qui ont une différence de 3 caractères maximum : Dans ce cas, il est fortement conseillé d’utiliser l’option didoscalim_update_only afin d’éviter de créer des objets par erreur.","code":"library(withr) library(stringdist)  withr::local_options(list(didoscalim_title_comparison = function(column, string) {   stringdist(column, string) <= 3 }))  dataset1 <- add_or_update_dataset(   title = \"données sur l'évolution des espèce\",   description = \"Un jeu de données de test\",   frequency = \"unknown\",   topic = \"Transports\" ) #> dataset `données sur l'évolution des espèce` créé  dataset2 <- add_or_update_dataset(   title = \"Données sur l'évolution des espèces.\",   description = \"Un jeu de données de test\",   frequency = \"unknown\",   topic = \"Transports\" ) #> dataset `Données sur l'évolution des espèces.` créé  dataset1$id == dataset2$id #> [1] FALSE dataset1$title #> [1] \"données sur l'évolution des espèce\" dataset2$title #> [1] \"Données sur l'évolution des espèces.\" didoscalim_update_only(TRUE) #> Error in didoscalim_update_only(TRUE): impossible de trouver la fonction \"didoscalim_update_only\"                      dataset <- add_or_update_dataset(   title = \"Données sur l'évolution des écosystèmes.\",   description = \"Un jeu de données de test\",   frequency = \"unknown\",   topic = \"Transports\"   ) #> dataset `Données sur l'évolution des écosystèmes.` créé"},{"path":"https://mtes-mct.github.io/didoscalim/articles/csv-augmente.html","id":"le-csv-augmenté","dir":"Articles","previous_headings":"","what":"Le CSV augmenté","title":"Générer un fichier csv augmenté","text":"DiDo utilise un csv augmenté avec 4 lignes d’entêtes : une description des variables le type de la variable l’unité de la variable le nom de la variable Le site de documentation de l’API propose une documentation plus complète sur le csv augmenté ainsi que sur la liste des types.","code":"\"Commune\";\"Nombre de logements neufs\" \"cog_commune_2020\";\"entier\" \"n/a\";\"s/u\" \"COMMUNE\";\"LOGEMENTS_NEUFS\""},{"path":"https://mtes-mct.github.io/didoscalim/articles/csv-augmente.html","id":"générer-un-csv-augmenté-","dir":"Articles","previous_headings":"","what":"Générer un CSV augmenté.","title":"Générer un fichier csv augmenté","text":"didoscalim propose une fonction pour vous aider. La génération se passe en trois étapes : le chargement du fichier d’origine : dido_read_delim() l’ajout des lignes d’entêtes spécifiques : dido_csv() l’écriture du fichier au bon format : dido_write_csv()","code":""},{"path":"https://mtes-mct.github.io/didoscalim/articles/csv-augmente.html","id":"le-chargement-du-fichier-dorigine","dir":"Articles","previous_headings":"","what":"le chargement du fichier d’origine","title":"Générer un fichier csv augmenté","text":"Le fichier d’origine doit être au format CSV classique, ie, la première ligne du fichier contient le nom des variables. Vous pouvez télécharger le fichier exemple utilisé. En premier lieu, charger le fichier dans un dataframe avec la commande dido_read_delim(). Si votre fichier est dans un format autre que UTF-8 ou que le séparateur de champ est la virgule (,) à vous devez préciser delim et/ou locale :","code":"data <- dido_read_delim(\"exemple.csv\") knitr::kable(head(data, n = 5)) dido_read_delim(dido_example(\"csv-win-char.csv\"),                 delim = \",\",                 locale = locale(encoding = \"WINDOWS-1252\") ) #> # A tibble: 5 × 8 #>   OPE   ANNEE FILIERE EPCI      CAT     NAF2  GS    CONSO  #>   <chr> <chr> <chr>   <chr>     <chr>   <chr> <chr> <chr>  #> 1 Aé    2019  G       200036465 RES     NA    R     1039   #> 2 ESL   2019  G       200034023 ENT_PRO NA    I     552    #> 3 ÇÀ    2019  G       200034270 RES     NA    R     75914  #> 4 RGDS  2019  G       200034635 ENT     10    I     454    #> 5 SîCÂE 2019  G       200037059 ENT_PRO NA    I     288821"},{"path":"https://mtes-mct.github.io/didoscalim/articles/csv-augmente.html","id":"lajout-des-lignes-dentêtes-spécifiques","dir":"Articles","previous_headings":"","what":"L’ajout des lignes d’entêtes spécifiques","title":"Générer un fichier csv augmenté","text":"didoscalim peut analyser le fichier et proposer un premier niveau de description. didoscalim reconnait les champs EPCI et ANNEE et propose des descriptions/types/unités raisonnables. Il est recommandé de les garder. Le millésime des champs cog_* comme celui du champ EPCI est par défaut l’année en cours, vous pouvez préciser le millésime à utiliser avec le paramètre cog_year (cf exemple complet ci-dessous). Si le fichier source utilise la virgule (,) comme séparateur décimal, vous devez préciser l’argument locale : Pour aller plus loin, vous pouvez soit écrire le fichier tel quel avec dido_write_csv() et l’éditer à la main. Soit utiliser le paramètre params de la commande dido_csv(). Voici un exemple complet pour le fichier exemple :","code":"result <- dido_csv(data) knitr::kable(head(result, n = 5)) temp <- dido_csv(   data,   locale = locale(decimal_mark = ',') ) params = list(   OPE = list(name = \"OPERATEUR\", description = \"Nom de l'opérateur\"),   FILIERE = list(description = \"Filière\"),   CAT = list(description = \"Catégorie de la consommation\"),   NAF2 = list(description = \"Code NAF à 2 positions du secteur (NAF rev2 2008)\", type = \"naf_division\"),   CONSO = list(description = \"Consommation (en MWh)\", unit = \"MWh\") ) result <- dido_csv(data, params = params, cog_year = 2020) knitr::kable(head(result, n = 5))"},{"path":"https://mtes-mct.github.io/didoscalim/articles/csv-augmente.html","id":"travailler-avec-un-fichier-source-volumineux","dir":"Articles","previous_headings":"","what":"travailler avec un fichier source volumineux","title":"Générer un fichier csv augmenté","text":"Si vous travaillez sur un fichier de données volumineux, la méthode dido_csv peut prendre un temps de traitement certain. Pour tester la génération des entêtes du CSV augmenté, vous pouvez travailler sur un sous-ensemble de votre dataframe : Attention, toutefois, si vous vous appuyez sur la détection automatique des colonnes, utilisez un nombre de lignes suffisamment grand : 10 000 voire 1 000 lignes devrait suffire dans la majeure partie des cas pour réduire le temps de traitement largement en dessous de la seconde tout en permettant une bonne détection automatique.","code":"result <- data %>% head(10000) %>% dido_csv(params = params, cog_year = 2020)"},{"path":"https://mtes-mct.github.io/didoscalim/articles/csv-augmente.html","id":"lécriture-du-fichier-au-bon-format-","dir":"Articles","previous_headings":"","what":"L’écriture du fichier au bon format.","title":"Générer un fichier csv augmenté","text":"Vous pouvez télécharger le fichier généré","code":"dido_write_csv(result, \"resultat.csv\")"},{"path":"https://mtes-mct.github.io/didoscalim/articles/csv-augmente.html","id":"résumé-","dir":"Articles","previous_headings":"","what":"résumé.","title":"Générer un fichier csv augmenté","text":"Une fois que la configuration de params est correcte, vous pouvez chainer avec l’opérateur magrittr::%>% :","code":"require(magrittr) #> Le chargement a nécessité le package : magrittr dido_read_delim(dido_example(\"exemple.csv\")) %>%   dido_csv(params = params) %>%   dido_write_csv(\"/tmp/resultat.csv\")"},{"path":"https://mtes-mct.github.io/didoscalim/articles/les-environnements.html","id":"les-environnements-dido","dir":"Articles","previous_headings":"","what":"Les environnements DiDo","title":"Configurer et utiliser les environnements","text":"Les données publiées sur l’environnement de production de DiDo (PROD) sont immédiatement mis en ligne et disponibles sur internet. Pour tester vos jeux de données, il est recommander d’utiliser un environnement ECOLE en amont de la publication officielle. Cet environnement permet de valider : le chargement proprement dit les métadonnées associées la qualité statistique","code":""},{"path":"https://mtes-mct.github.io/didoscalim/articles/les-environnements.html","id":"configuration","dir":"Articles","previous_headings":"","what":"Configuration","title":"Configurer et utiliser les environnements","text":"Les environnements se configurent dans le fichier .Renviron. Chaque environnement est configuré par deux lignes comme celles-ci : <NOM_ENVIRONNEMENT> peut prendre les valeurs DEV, PREPROD, ECOLE et PROD <CLEF_API> est disponible dans l’interface d’alimentation DiDo dans la rubrique « Mon compte ». Si vous êtes un producteur et que vous avez accès aux environnements ECOLE et PROD, votre fichier .Renviron ressemblera à : Pour le modifier vous pouvez utiliser les commandes suivantes :","code":"DIDOSCALIM_BASE_PATH_<NOM_ENVIRONNEMENT>=http://api.alimentation.ecole.fr/v1 DIDOSCALIM_API_KEY_<NOM_ENVIRONNEMENT>=<CLEF_API> DIDOSCALIM_BASE_PATH_ECOLE=http://api.alimentation.ecole.fr/v1 DIDOSCALIM_API_KEY_ECOLE=ma_clef_api_ecole  DIDOSCALIM_BASE_PATH_PROD=http://api.alimentation.prod.fr/v1 DIDOSCALIM_API_KEY_PROD=ma_clef_api_prod library(devtools) usethis::edit_r_environ() readRenviron(\"~/.Renviron\") library(didoscalim) load_envs() check_envs()"},{"path":"https://mtes-mct.github.io/didoscalim/articles/les-environnements.html","id":"choisir-un-environnement","dir":"Articles","previous_headings":"","what":"Choisir un environnement","title":"Configurer et utiliser les environnements","text":"Si vous ne sélectionnez pas d’environnement, DiDo prendra automatiquement par défaut le premier configuré dans l’ordre : DEV, PREPROD, ECOLE. Il ne choisira jamais PROD implicitement. Pour sélectionner un environnement, utilisez la commande set_work_env() : Pour revenir à l’environnement par défaut : Vous pouvez à tout moment voir dans quel environnement vous êtes avec la commande get_work_env(). Vous pouvez lister les environnements configués avec la commande list_envs() : et vérifier qu’ils fonctionnent avec la commande check_envs() :","code":"set_work_env(\"PROD\") #> ✖ Environnement DiDo actif : PROD set_work_env() #> ✖ Environnement DiDo actif : DEV list_envs() #> Vous avez 3 environnement(s) configuré(s) :  #> ℹ DEV : http://api.alimentation.dido.fr/v1 #> ℹ PREPROD : http://api.alimentation.dido.fr/ #> ℹ PROD : http://api.alimentation.dido.fr/v1 check_envs() #> ✖ Environnement DiDo actif : DEV #> ✖ Environnement DiDo actif : PREPROD #> ✖ Environnement DiDo actif : PROD #> Test de connexion: #> ℹ DEV: OK #> ✖ PREPROD: KO: ✖ Client error : 404 ℹ url: http://api.alimentation.dido.fr//users/me #> ℹ PROD: OK #> ✖ Environnement DiDo actif : DEV"},{"path":"https://mtes-mct.github.io/didoscalim/articles/les-environnements.html","id":"méthode-dalimentation","dir":"Articles","previous_headings":"","what":"Méthode d’alimentation","title":"Configurer et utiliser les environnements","text":"Écrivez et testez vos scripts dans l’environnement ECOLE par défaut. Quand vous êtes satisfait du résultat, basculer sur l’environnement de PROD et relancez les scripts.","code":""},{"path":"https://mtes-mct.github.io/didoscalim/articles/valider-un-fichier.html","id":"valider-un-fichier","dir":"Articles","previous_headings":"","what":"Valider un fichier","title":"Valider un fichier de données à importer","text":"Ce document pour objectif de vous aider à valider un fichier de données. Votre fichier peut contenir des centaines de milliers de lignes et des dizaines de colonnes dont de type COG. Avant tout chargement dans l’environnement de production, il est conseillé de le valider en le chargeant dans l’environnement ECOLE de DiDo. La fonction check_import_file() automatise cela : Cette fonction : chargera le fichier vous imprimera les erreurs supprimera les données","code":"check_import_file(dido_example(\"file-with-error.csv\")) #> ✖ Problème sur le fichier `/home/nc/R/x86_64-pc-linux-gnu-library/4.3/didoscalim/extdata/file-with-error.csv` #> ✖ Le fichier est invalide #> ✖ colonne_1: La description est requise #> ✖ colonne_2: Le type anneee n'est pas un type connu. #> [1] FALSE"},{"path":"https://mtes-mct.github.io/didoscalim/authors.html","id":null,"dir":"","previous_headings":"","what":"Auteur·rice·s","title":"Auteur·rice·s et Citation","text":"Nicolas Chuche. Auteur·rice, mainteneur·se. MTE CGDD. Titulaire des droits d'auteur.","code":""},{"path":"https://mtes-mct.github.io/didoscalim/authors.html","id":"citation","dir":"","previous_headings":"","what":"Citation","title":"Auteur·rice·s et Citation","text":"Chuche N (2023). didoscalim: Charger des données dans DiDo. https://mtes-mct.github.io/didoscalim/, https://github.com/MTES-MCT/didoscalim.","code":"@Manual{,   title = {didoscalim: Charger des données dans DiDo},   author = {Nicolas Chuche},   year = {2023},   note = {https://mtes-mct.github.io/didoscalim/, https://github.com/MTES-MCT/didoscalim}, }"},{"path":"https://mtes-mct.github.io/didoscalim/index.html","id":"didoscalim","dir":"","previous_headings":"","what":"Charger des données dans DiDo","title":"Charger des données dans DiDo","text":"Un package R pour : générer des fichiers CSV au format DiDo (CSV augmenté) automatiser l’alimentation l’outil de diffusion de données DiDo du CGDD/SDES. Ce package est en cours de développement.","code":""},{"path":"https://mtes-mct.github.io/didoscalim/index.html","id":"installation","dir":"","previous_headings":"","what":"Installation","title":"Charger des données dans DiDo","text":"Vous pouvez installer ce package depuis GitHub :","code":"# Install from GitHub library(devtools) devtools::install_github(\"mtes-mct/didoscalim\")  library(didoscalim)"},{"path":"https://mtes-mct.github.io/didoscalim/index.html","id":"exemple","dir":"","previous_headings":"","what":"Exemple","title":"Charger des données dans DiDo","text":"Générer un fichier CSV augmenté à partir d’un fichier CSV normal et le charger dans un dataset. L’intégrer dans DiDo :","code":"library(didoscalim)  params = list(   OPERATEUR = list(description = \"Nom de l'opérateur\"),   FILIERE = list(description = \"Filière\"),   CODE_CATEGORIE_CONSOMMATION = list(description = \"Catégorie de la consommation\"),   CODE_SECTEUR_NAF2 = list(description = \"Code NAF à 2 positions du secteur (NAF rev2 2008)\", type = \"naf_division\"),   CONSO = list(description = \"Consommation (en MWh)\", unit = \"MWh\") )  temp_file <- tempfile(fileext = \".csv\") dido_read_delim(dido_example(\"exemple.csv\")) %>%   dido_csv(params = params, cog_year = \"2019\") %>%   dido_write_csv(temp_file) dataset <- add_or_update_dataset(   title = \"Un jeu de données fictif\",   description = \"Un jeu de données énergie fictif\",   topic = \"Transports\",   temporal_coverage_start = \"2020-01-01\",   temporal_coverage_end = \"2020-12-31\",   frequency = \"annual\",   frequency_date = \"2021-10-10\" )  add_or_update_datafile(   dataset = dataset,   file_name = temp_file,   title = \"Données de consommation fictive – gaz – année 2020\",   description = \"Consommations annuelles et nombre de points de livraison de chaleur et froid, par secteur d'activité\",   temporal_coverage_start = \"2020-01-01\",   temporal_coverage_end = \"2020-12-31\",   millesime = \"2021-10\" )"},{"path":"https://mtes-mct.github.io/didoscalim/index.html","id":"configuration","dir":"","previous_headings":"","what":"Configuration","title":"Charger des données dans DiDo","text":"La configuration de didoscalim se fait dans votre .Renviron. Vous trouverez la documentation nécessaire dans la vignette utiliser les environnements","code":""},{"path":"https://mtes-mct.github.io/didoscalim/index.html","id":"documentation","dir":"","previous_headings":"","what":"Documentation","title":"Charger des données dans DiDo","text":"Vous pouvez trouver l’ensemble de la documentation sur la page du projet et en particulier : comment générer un fichier augmenté comment charger et/ou mettre à jour des données dans DiDo utiliser les environnements","code":""},{"path":"https://mtes-mct.github.io/didoscalim/index.html","id":"pour-les-développeurs","dir":"","previous_headings":"","what":"Pour les développeurs","title":"Charger des données dans DiDo","text":"Avant de publier une version assurez-vous que check() fonctionne Pour gagner du temps vous pouvez lancer séparément les tests unitaires et de couverture : Ainsi que les exemples : Tester sous d’anciennes versions :","code":"source(\"populate.R\") check() library(devtools) test() library(covr) report() run_examples() docker run -it -e TZ=Europe/Paris -v $HOME/.Renviron:/root/.Renviron -v /etc/hosts:/etc/hosts -v $(pwd):/root/didoscalim rocker/tidyverse:4.1 Rscript /root/didoscalim/rocker_test.R"},{"path":"https://mtes-mct.github.io/didoscalim/index.html","id":"les-tests","dir":"","previous_headings":"Pour les développeurs","what":"Les tests","title":"Charger des données dans DiDo","text":"Les tests de ce package nécessitent pour le moment un environnement de développement DiDo configuré pour tester les interactions avec l’API.","code":""},{"path":"https://mtes-mct.github.io/didoscalim/index.html","id":"documentation-en-ligne","dir":"","previous_headings":"Pour les développeurs","what":"Documentation en ligne","title":"Charger des données dans DiDo","text":"La documentation ne peut pas (encore ?) être généré par les github actions, il faut donc pour le moment générer le site statiquement à partir d’un poste qui accès à un environnement DiDo de développement. Si vous avez modifié la documentation, avant de pousser une nouvelle vous devez la valider en local : Évidemment lancer un R CMD check() Et quand vous êtes satisfait, videz la base de test, chargez les données de base en lançant populate.R puis la commande qui publiera le site sur les github pages :","code":"source('populate.R') devtools::build_readme() devtools::document() devtools::build_vignettes() devtools::build_site() source('populate.R') library(pkgdown) deploy_to_branch()"},{"path":"https://mtes-mct.github.io/didoscalim/reference/add_attachment.html","id":null,"dir":"Reference","previous_headings":"","what":"Ajoute un fichier annexe à un dataset — add_attachment","title":"Ajoute un fichier annexe à un dataset — add_attachment","text":"Ajoute un fichier annexe à un dataset","code":""},{"path":"https://mtes-mct.github.io/didoscalim/reference/add_attachment.html","id":"ref-usage","dir":"Reference","previous_headings":"","what":"Utilisation","title":"Ajoute un fichier annexe à un dataset — add_attachment","text":"","code":"add_attachment(   dataset,   title,   description,   file_name = NULL,   remote_url = NULL,   type = \"documentation\",   published = format(Sys.time(), \"%Y-%m-%d %H:%M:%S\") )"},{"path":"https://mtes-mct.github.io/didoscalim/reference/add_attachment.html","id":"arguments","dir":"Reference","previous_headings":"","what":"Arguments","title":"Ajoute un fichier annexe à un dataset — add_attachment","text":"dataset l'id d'un dataset de rattachement, un objet dido_dataset(), dido_datafile() ou dido_job() title le titre du fichier annexe description la description du fichier annexe file_name, remote_url le nom du fichier à verser ou l'url de l'attachement. type le type de fichier versé. Peut-être documentation ou historical_data. Par défaut documentation published la date/heure de publication du fichier, si non précisée, prend la date/heure du moment. Ce paramètre est au format \"AAAA-MM-JJ HH:MM:SS\" (ou ISO8601 si vous préférez). Si la timezone n'est pas précisée, la timezone de l'ordinateur local est utilisée.","code":""},{"path":"https://mtes-mct.github.io/didoscalim/reference/add_attachment.html","id":"valeur-de-retour","dir":"Reference","previous_headings":"","what":"Valeur de retour","title":"Ajoute un fichier annexe à un dataset — add_attachment","text":"un objet dido_attachment()","code":""},{"path":[]},{"path":"https://mtes-mct.github.io/didoscalim/reference/add_attachment.html","id":"ref-examples","dir":"Reference","previous_headings":"","what":"Exemples","title":"Ajoute un fichier annexe à un dataset — add_attachment","text":"","code":"library(dplyr, warn.conflicts = FALSE)  dataset <- add_or_update_dataset(   title = \"Des données statistiques\",   description = \"Description des données statistiques\",   topic = \"Transports\",   frequency = \"unknown\", ) #> dataset `Des données statistiques` créé  dataset %>% add_attachment(   title = \"title\",   description = \"description\",   file_name = dido_example(\"attachment.txt\"),   type = 'historical_data' ) #>     intégration du fichier annexe `attachment.txt` #> \t* fichier versé #> \t* fichier annexe intégré (rid: 5c6c417e-03d0-4270-a930-ddea870db395)  dataset %>% add_attachment(   title = \"title\",   description = \"Un attachment sous forme de lien externe\",   remote_url = \"https://www.lemonde.fr/\" )"},{"path":"https://mtes-mct.github.io/didoscalim/reference/add_datafile.html","id":null,"dir":"Reference","previous_headings":"","what":"Ajoute un datafile à un dataset — add_datafile","title":"Ajoute un datafile à un dataset — add_datafile","text":"Ajoute un datafile à un dataset","code":""},{"path":"https://mtes-mct.github.io/didoscalim/reference/add_datafile.html","id":"ref-usage","dir":"Reference","previous_headings":"","what":"Utilisation","title":"Ajoute un datafile à un dataset — add_datafile","text":"","code":"add_datafile(   dataset,   title,   description,   file_name,   millesime = format(Sys.time(), \"%Y-%m\"),   published = format(Sys.time(), \"%Y-%m-%d %H:%M:%S\"),   temporal_coverage_start = NULL,   temporal_coverage_end = NULL,   legal_notice = \"SDES\",   date_diffusion = format(Sys.time(), \"%Y-%m-%d %H:%M:%S\") )"},{"path":"https://mtes-mct.github.io/didoscalim/reference/add_datafile.html","id":"arguments","dir":"Reference","previous_headings":"","what":"Arguments","title":"Ajoute un datafile à un dataset — add_datafile","text":"dataset l'id d'un dataset, un objet dido_dataset(), dido_datafile() ou dido_job() title le titre du datafile description la description du datafile file_name le nom du fichier à charger millesime le millesime (AAAA-MM). Par défaut AAAA-MM avec l'année courante et le mois courant published la date/heure de publication du fichier, si non précisée, prend la date/heure du moment. Ce paramètre est au format \"AAAA-MM-JJ HH:MM:SS\" (ou ISO8601 si vous préférez). Si la timezone n'est pas précisée, la timezone de l'ordinateur local est utilisée. temporal_coverage_start optionnel, la date de début de couverture du fichier de données au format AAAA-MM-JJ temporal_coverage_end optionnel, la date de fin de couverture du fichier de données au format AAAA-MM-JJ legal_notice les mentions légales, par défaut \"SDES\" date_diffusion (optionnel) les date et heure auxquelles le fichier devra être rendu accessible à la diffusion. Ce paramètre est au format \"AAAA-MM-JJ HH:MM:SS\" (ou ISO8601 si vous préférez). Si la timezone n'est pas précisée, la timezone de l'ordinateur local est utilisée. Si cette date/heure est dans le passé, les données sont immédiatement accessibles, si elle est dans le futur, les données ne seront accessibles qu'à cette date/heure. Si ce paramètre est non précisé prend la date/heure courante, les données sont donc immédiatement accessibles.","code":""},{"path":"https://mtes-mct.github.io/didoscalim/reference/add_datafile.html","id":"valeur-de-retour","dir":"Reference","previous_headings":"","what":"Valeur de retour","title":"Ajoute un datafile à un dataset — add_datafile","text":"un objet dido_job()","code":""},{"path":[]},{"path":"https://mtes-mct.github.io/didoscalim/reference/add_datafile.html","id":"ref-examples","dir":"Reference","previous_headings":"","what":"Exemples","title":"Ajoute un datafile à un dataset — add_datafile","text":"","code":"library(dplyr, warn.conflicts = FALSE)  dataset <- add_or_update_dataset(   title = \"Un dataset pour les datafiles\",   description = \"Description des données statistiques\",   topic = \"Transports\",   frequency = \"unknown\", ) #> dataset `Un dataset pour les datafiles` créé  add_datafile(   dataset = dataset,   title = \"titre\",   description = \"description\",   file_name = dido_example(\"augmente.csv\") ) #>     intégration du fichier `/home/nc/travail/R/didoscalim/inst/extdata/augmente.csv` #> \t* fichier versé #> \t* fichier validé #> \t* fichier intégré: \t rid: d5590649-0138-4b65-8704-8b7df8cbeb03\t millesime: 2023-10\t lignes: 5  # publier un fichier de données avec toutes les métadonnées et un embargo add_datafile(   dataset = dataset,   title = \"titre 2\",   description = \"description 2\",   file_name = dido_example(\"augmente.csv\"),   temporal_coverage_start = \"2021-01-01\",   temporal_coverage_end = \"2021-12-31\",   legal_notice = \"something\",   millesime = \"2020-10\",   date_diffusion = \"2020-11-01 07:45:00\" ) #>     intégration du fichier `/home/nc/travail/R/didoscalim/inst/extdata/augmente.csv` #> \t* fichier versé #> \t* fichier validé #> \t* fichier intégré: \t rid: 24d51d88-a5f5-4c4d-b5b1-a2ee79bb8fd8\t millesime: 2020-10\t lignes: 5"},{"path":"https://mtes-mct.github.io/didoscalim/reference/add_dataset.html","id":null,"dir":"Reference","previous_headings":"","what":"Ajoute un dataset — add_dataset","title":"Ajoute un dataset — add_dataset","text":"Ajoute un dataset","code":""},{"path":"https://mtes-mct.github.io/didoscalim/reference/add_dataset.html","id":"ref-usage","dir":"Reference","previous_headings":"","what":"Utilisation","title":"Ajoute un dataset — add_dataset","text":"","code":"add_dataset(   title,   description,   topic,   frequency,   tags = NULL,   frequency_date = NULL,   granularity = NULL,   zones = NULL,   organization = my_organization(),   license = \"fr-lo\",   temporal_coverage_start = NULL,   temporal_coverage_end = NULL,   caution = NULL )"},{"path":"https://mtes-mct.github.io/didoscalim/reference/add_dataset.html","id":"arguments","dir":"Reference","previous_headings":"","what":"Arguments","title":"Ajoute un dataset — add_dataset","text":"title le titre du dataset description la description du dataset topic le thème du dataset. Doit être dans \"Environnement\", \"Énergie\", \"Transports\", \"Logement\", \"Changement climatique\" frequency la fréquence de publication des données. Les fréquences les plus utilisées sont annual, monthly, ponctual, unknown. la liste complète des fréquences tags la liste des mots clefs. Si le fichier est déjà publié sur le site SDES, reprend les mêmes. La liste des mots clefs recensés. frequency_date la date de prochaine publication. optionnel seulement la frequency est unknown. granularity la granularité du jeu de données. Les plus utilisés sont \"fr:region\", \"fr:departement\", \"fr:epci\", \"fr:commune\", \"fr:iris\" et pour les données à l'adresse \"poi\". La liste complète des granularités zones la zone couverte par le jeu de données. country:fr pour France entière, country-subset:fr:metro pour la métropole et `country-subset:fr:drom`` pour les DROM organization l'id de l'organisation sous laquelle vous souhaitez publier le dataset, si vous n'appartenez qu'à une seule organisation, vous n'avez pas à remplir ce champ, didoscalim la prendra par défaut. Si ça n'est pas le cas, vous devez préciser la fonction my_organization() license la licence des données. \"fr-lo\" par défaut temporal_coverage_start optionnel, la date de début de couverture du jeux de données au format AAAA-MM-JJ temporal_coverage_end optionnel, la date de fin de couverture du jeux de données au format AAAA-MM-JJ caution Les précautions à prendre avec ce jeu de données. Par exemple : \"certaines données peuvent être secrétisées\"","code":""},{"path":"https://mtes-mct.github.io/didoscalim/reference/add_dataset.html","id":"valeur-de-retour","dir":"Reference","previous_headings":"","what":"Valeur de retour","title":"Ajoute un dataset — add_dataset","text":"un objet dido_dataset(). Ce dernier sert pour créer par la suite les datafiles et les millésimes.","code":""},{"path":[]},{"path":"https://mtes-mct.github.io/didoscalim/reference/add_dataset.html","id":"ref-examples","dir":"Reference","previous_headings":"","what":"Exemples","title":"Ajoute un dataset — add_dataset","text":"","code":"dataset <- add_dataset(   title = \"Données logements\",   description = \"Données logement en date réelle\",   topic = \"Transports\",   frequency = \"unknown\" ) #> dataset `Données logements` créé  dataset <- add_dataset(   title = \"Données parc de véhicule\",   description = \"Données parc de véhicule\",   topic = \"Transports\",   tags = list(\"transport\", \"vehicule\", \"circulation\"),   frequency = \"annual\",   organization = my_organization(),   frequency_date = \"2022-12-31\",   temporal_coverage_start = \"2021-01-01\",   temporal_coverage_end = \"2021-12-31\",   granularity = \"fr:region\",   zones = \"country:fr\",   caution = \"caution\",   license = \"ODbL-1.0\" ) #> dataset `Données parc de véhicule` créé"},{"path":"https://mtes-mct.github.io/didoscalim/reference/add_millesime.html","id":null,"dir":"Reference","previous_headings":"","what":"Ajoute un millésime à un datafile — add_millesime","title":"Ajoute un millésime à un datafile — add_millesime","text":"Ajoute un millésime à un datafile","code":""},{"path":"https://mtes-mct.github.io/didoscalim/reference/add_millesime.html","id":"ref-usage","dir":"Reference","previous_headings":"","what":"Utilisation","title":"Ajoute un millésime à un datafile — add_millesime","text":"","code":"add_millesime(   datafile,   file_name,   date_diffusion = format(Sys.time(), \"%Y-%m-%d %H:%M:%S\"),   millesime = format(Sys.time(), \"%Y-%m\") )"},{"path":"https://mtes-mct.github.io/didoscalim/reference/add_millesime.html","id":"arguments","dir":"Reference","previous_headings":"","what":"Arguments","title":"Ajoute un millésime à un datafile — add_millesime","text":"datafile un objet dido_datafile obtenu par get_datafile() file_name le nom du fichier à charger date_diffusion (optionnel) les date et heure auxquelles le fichier devra être rendu accessible à la diffusion. Ce paramètre est au format \"AAAA-MM-JJ HH:MM:SS\" (ou ISO8601 si vous préférez). Si la timezone n'est pas précisée, la timezone de l'ordinateur local est utilisée. Si cette date/heure est dans le passé, les données sont immédiatement accessibles, si elle est dans le futur, les données ne seront accessibles qu'à cette date/heure. Si ce paramètre est non précisé prend la date/heure courante, les données sont donc immédiatement accessibles. millesime le millesime (AAAA-MM). Par défaut AAAA-MM avec l'année courante et le mois courant","code":""},{"path":"https://mtes-mct.github.io/didoscalim/reference/add_millesime.html","id":"valeur-de-retour","dir":"Reference","previous_headings":"","what":"Valeur de retour","title":"Ajoute un millésime à un datafile — add_millesime","text":"un objet dido_job()","code":""},{"path":[]},{"path":"https://mtes-mct.github.io/didoscalim/reference/add_millesime.html","id":"ref-examples","dir":"Reference","previous_headings":"","what":"Exemples","title":"Ajoute un millésime à un datafile — add_millesime","text":"","code":"library(dplyr, warn.conflicts = FALSE)  datafile <- list_datafiles() %>%   slice(1) %>%   get_datafile()  millesime <- add_millesime(   datafile = datafile,   file_name = dido_example(\"augmente.csv\"),   millesime = \"2011-10\" ) #>     intégration du fichier `/home/nc/travail/R/didoscalim/inst/extdata/augmente.csv` #> \t* fichier versé #> \t* fichier validé #> \t* fichier intégré: \t rid: d5590649-0138-4b65-8704-8b7df8cbeb03\t millesime: 2011-10\t lignes: 5  # publier un millésime avec embargo millesime <- add_millesime(   datafile = datafile,   file_name = dido_example(\"augmente.csv\"),   millesime = \"2012-10\",   date_diffusion = \"2011-10-10 08:00:00\" ) #>     intégration du fichier `/home/nc/travail/R/didoscalim/inst/extdata/augmente.csv` #> \t* fichier versé #> \t* fichier validé #> \t* fichier intégré: \t rid: d5590649-0138-4b65-8704-8b7df8cbeb03\t millesime: 2012-10\t lignes: 5"},{"path":"https://mtes-mct.github.io/didoscalim/reference/add_or_update_attachment.html","id":null,"dir":"Reference","previous_headings":"","what":"Ajoute ou modifie un fichier annexe dans un dataset — add_or_update_attachment","title":"Ajoute ou modifie un fichier annexe dans un dataset — add_or_update_attachment","text":"met à jour l'attachement avec le même titre s'il existe sinon ajoute un attachement. Si vous devez mettre à jour des attachments, il est conseillé d'utiliser la fonction didoscalim_update_only(), cf vignette(\"complements-sur-les-mises--jour\")","code":""},{"path":"https://mtes-mct.github.io/didoscalim/reference/add_or_update_attachment.html","id":"ref-usage","dir":"Reference","previous_headings":"","what":"Utilisation","title":"Ajoute ou modifie un fichier annexe dans un dataset — add_or_update_attachment","text":"","code":"add_or_update_attachment(   dataset,   title,   description,   file_name = NULL,   remote_url = NULL,   published = format(Sys.time(), \"%Y-%m-%d %H:%M:%S\"),   check_file_date = FALSE,   type = \"documentation\" )"},{"path":"https://mtes-mct.github.io/didoscalim/reference/add_or_update_attachment.html","id":"arguments","dir":"Reference","previous_headings":"","what":"Arguments","title":"Ajoute ou modifie un fichier annexe dans un dataset — add_or_update_attachment","text":"dataset l'id d'un dataset de rattachement, un objet dido_dataset(), dido_datafile() ou dido_job() title le titre du fichier annexe description la description du fichier annexe file_name, remote_url le nom du fichier à verser ou l'url de l'attachement. published la date/heure de publication du fichier, si non précisée, prend la date/heure du moment. Ce paramètre est au format \"AAAA-MM-JJ HH:MM:SS\" (ou ISO8601 si vous préférez). Si la timezone n'est pas précisée, la timezone de l'ordinateur local est utilisée. check_file_date TRUE/FALSE, Si TRUE met à jour l'attachment uniquement si le fichier est plus récent que le last_modified de l'attachment type le type de fichier versé. Peut-être documentation ou historical_data. Par défaut documentation","code":""},{"path":"https://mtes-mct.github.io/didoscalim/reference/add_or_update_attachment.html","id":"valeur-de-retour","dir":"Reference","previous_headings":"","what":"Valeur de retour","title":"Ajoute ou modifie un fichier annexe dans un dataset — add_or_update_attachment","text":"un objet dido_attachment() ou NULL si aucune création/mise à jour n'eu lieu","code":""},{"path":[]},{"path":"https://mtes-mct.github.io/didoscalim/reference/add_or_update_attachment.html","id":"ref-examples","dir":"Reference","previous_headings":"","what":"Exemples","title":"Ajoute ou modifie un fichier annexe dans un dataset — add_or_update_attachment","text":"","code":"library(dplyr, warn.conflicts = FALSE)  dataset <- add_or_update_dataset(   title = \"Un dataset pour les attachement\",   description = \"Description des données statistiques\",   topic = \"Transports\",   frequency = \"unknown\", ) #> dataset `Un dataset pour les attachement` créé  add_or_update_attachment(   dataset = dataset,   title = \"title\",   description = \"description\",   file_name = dido_example(\"attachment.txt\") ) #>     intégration du fichier annexe `attachment.txt` #> \t* fichier versé #> \t* fichier annexe intégré (rid: c249c826-f74d-48fb-ab59-9a649e8881e2)  add_or_update_attachment(   dataset = dataset,   title = \"title\",   description = \"description\",   remote_url = \"https://www.lemonde.fr\" ) #> \t* fichier annexe remplacé (rid: c249c826-f74d-48fb-ab59-9a649e8881e2) #> attachment \"title\" modifié"},{"path":"https://mtes-mct.github.io/didoscalim/reference/add_or_update_datafile.html","id":null,"dir":"Reference","previous_headings":"","what":"Ajoute ou modifie un datafile — add_or_update_datafile","title":"Ajoute ou modifie un datafile — add_or_update_datafile","text":"met à jour le datafile (métadonnées et données) avec le même titre s'il existe sinon ajoute un datafile, un millésime ou remplace un millésime s'il existe déjà. Le paramètre on_existing_millesime permet de préciser le comportement à adopter si le millésime existe déjà. Si plusieurs datafiles ont le même titre, cette méthode retourne une erreur. Si vous devez mettre à jour des datafiles, il est conseillé d'utiliser la fonction didoscalim_update_only(), cf vignette(\"complements-sur-les-mises--jour\")","code":""},{"path":"https://mtes-mct.github.io/didoscalim/reference/add_or_update_datafile.html","id":"ref-usage","dir":"Reference","previous_headings":"","what":"Utilisation","title":"Ajoute ou modifie un datafile — add_or_update_datafile","text":"","code":"add_or_update_datafile(   dataset,   title,   description,   file_name,   millesime = format(Sys.time(), \"%Y-%m\"),   published = format(Sys.time(), \"%Y-%m-%d %H:%M:%S\"),   temporal_coverage_start = NULL,   temporal_coverage_end = NULL,   legal_notice = \"SDES\",   date_diffusion = format(Sys.time(), \"%Y-%m-%d %H:%M:%S\"),   keep_old_millesimes = Inf,   on_existing_millesime = \"fail\",   check_file_date = FALSE )"},{"path":"https://mtes-mct.github.io/didoscalim/reference/add_or_update_datafile.html","id":"arguments","dir":"Reference","previous_headings":"","what":"Arguments","title":"Ajoute ou modifie un datafile — add_or_update_datafile","text":"dataset l'id d'un dataset, un objet dido_dataset(), dido_datafile() ou dido_job() title le titre du datafile description la description du datafile file_name le nom du fichier à charger millesime le millesime (AAAA-MM). Par défaut AAAA-MM avec l'année courante et le mois courant published la date/heure de publication du fichier, si non précisée, prend la date/heure du moment. Ce paramètre est au format \"AAAA-MM-JJ HH:MM:SS\" (ou ISO8601 si vous préférez). Si la timezone n'est pas précisée, la timezone de l'ordinateur local est utilisée. temporal_coverage_start optionnel, la date de début de couverture du fichier de données au format AAAA-MM-JJ temporal_coverage_end optionnel, la date de fin de couverture du fichier de données au format AAAA-MM-JJ legal_notice les mentions légales, par défaut \"SDES\" date_diffusion (optionnel) les date et heure auxquelles le fichier devra être rendu accessible à la diffusion. Ce paramètre est au format \"AAAA-MM-JJ HH:MM:SS\" (ou ISO8601 si vous préférez). Si la timezone n'est pas précisée, la timezone de l'ordinateur local est utilisée. Si cette date/heure est dans le passé, les données sont immédiatement accessibles, si elle est dans le futur, les données ne seront accessibles qu'à cette date/heure. Si ce paramètre est non précisé prend la date/heure courante, les données sont donc immédiatement accessibles. keep_old_millesimes nombre d'ancien millésimes à conserver. Ce paramètre permet de supprimer les anciens millésimes. Pour des raisons de sécurité, cette option n'effacera jamais des millésimes plus récent que le millésime passé en paramètre. on_existing_millesime skip/fail/replace : action à faire quand le millésime existe déjà. Peut-être : \"skip\" : retourne immédiatement après avoir affiché un message. Les métadonnées du millésime ne sont pas mises à jour et les anciens millésimes ne sont jamais effacés. \"fail\" : lève une exception de class existing_millesime. Les métadonnées du millésime ne sont pas mises à jour et les anciens millésimes ne sont jamais effacés. \"replace\" : remplace le millésime ayant le même identifiant check_file_date TRUE/FALSE, Si TRUE met à jour le datafile uniquement si le fichier est plus récent que le last_modified du datafile","code":""},{"path":"https://mtes-mct.github.io/didoscalim/reference/add_or_update_datafile.html","id":"valeur-de-retour","dir":"Reference","previous_headings":"","what":"Valeur de retour","title":"Ajoute ou modifie un datafile — add_or_update_datafile","text":"un objet dido_job() ou NULL si aucune création/mise à jour n'eu lieu","code":""},{"path":[]},{"path":"https://mtes-mct.github.io/didoscalim/reference/add_or_update_datafile.html","id":"ref-examples","dir":"Reference","previous_headings":"","what":"Exemples","title":"Ajoute ou modifie un datafile — add_or_update_datafile","text":"","code":"library(dplyr, warn.conflicts = FALSE)  dataset <- add_or_update_dataset(   title = \"Un dataset pour les add_or_update_datafiles\",   description = \"Description des données statistiques\",   topic = \"Transports\",   frequency = \"unknown\", ) #> dataset `Un dataset pour les add_or_update_datafiles` créé  add_or_update_datafile(   dataset = dataset,   title = \"titre\",   description = \"description\",   file_name = dido_example(\"augmente.csv\"),   millesime = \"2021-10\", ) #>     intégration du fichier `/home/nc/travail/R/didoscalim/inst/extdata/augmente.csv` #> \t* fichier versé #> \t* fichier validé #> \t* fichier intégré: \t rid: 5a642e97-edd5-41ed-994c-ed3bd362c4a2\t millesime: 2021-10\t lignes: 5  add_or_update_datafile(   dataset = dataset,   title = \"titre\",   description = \"description\",   file_name = dido_example(\"augmente.csv\"),   temporal_coverage_start = \"2021-01-01\",   temporal_coverage_end = \"2021-12-31\",   millesime = \"2022-10\", ) #>     intégration du fichier `/home/nc/travail/R/didoscalim/inst/extdata/augmente.csv` #> \t* fichier versé #> \t* fichier validé #> \t* fichier intégré: \t rid: 5a642e97-edd5-41ed-994c-ed3bd362c4a2\t millesime: 2022-10\t lignes: 5 #> datafile \"titre\" modifié"},{"path":"https://mtes-mct.github.io/didoscalim/reference/add_or_update_dataset.html","id":null,"dir":"Reference","previous_headings":"","what":"Ajoute ou met à jour un dataset — add_or_update_dataset","title":"Ajoute ou met à jour un dataset — add_or_update_dataset","text":"Cette fonction permet, par exemple, de modifier la période de couverture du dataset ainsi que la date de prochaine mise à jour. Si plusieurs datasets ont le même titre, cette méthode retourne une erreur. Si vous devez mettre à jour des datasets, il est conseillé d'utiliser la fonction didoscalim_update_only(), cf vignette(\"complements-sur-les-mises--jour\")","code":""},{"path":"https://mtes-mct.github.io/didoscalim/reference/add_or_update_dataset.html","id":"ref-usage","dir":"Reference","previous_headings":"","what":"Utilisation","title":"Ajoute ou met à jour un dataset — add_or_update_dataset","text":"","code":"add_or_update_dataset(   title,   description,   topic,   frequency,   tags = NULL,   frequency_date = NULL,   granularity = NULL,   zones = NULL,   organization = my_organization(),   license = \"fr-lo\",   temporal_coverage_start = NULL,   temporal_coverage_end = NULL,   caution = NULL )"},{"path":"https://mtes-mct.github.io/didoscalim/reference/add_or_update_dataset.html","id":"arguments","dir":"Reference","previous_headings":"","what":"Arguments","title":"Ajoute ou met à jour un dataset — add_or_update_dataset","text":"title le titre du dataset description la description du dataset topic le thème du dataset. Doit être dans \"Environnement\", \"Énergie\", \"Transports\", \"Logement\", \"Changement climatique\" frequency la fréquence de publication des données. Les fréquences les plus utilisées sont annual, monthly, ponctual, unknown. la liste complète des fréquences tags la liste des mots clefs. Si le fichier est déjà publié sur le site SDES, reprend les mêmes. La liste des mots clefs recensés. frequency_date la date de prochaine publication. optionnel seulement la frequency est unknown. granularity la granularité du jeu de données. Les plus utilisés sont \"fr:region\", \"fr:departement\", \"fr:epci\", \"fr:commune\", \"fr:iris\" et pour les données à l'adresse \"poi\". La liste complète des granularités zones la zone couverte par le jeu de données. country:fr pour France entière, country-subset:fr:metro pour la métropole et `country-subset:fr:drom`` pour les DROM organization l'id de l'organisation sous laquelle vous souhaitez publier le dataset, si vous n'appartenez qu'à une seule organisation, vous n'avez pas à remplir ce champ, didoscalim la prendra par défaut. Si ça n'est pas le cas, vous devez préciser la fonction my_organization() license la licence des données. \"fr-lo\" par défaut temporal_coverage_start optionnel, la date de début de couverture du jeux de données au format AAAA-MM-JJ temporal_coverage_end optionnel, la date de fin de couverture du jeux de données au format AAAA-MM-JJ caution Les précautions à prendre avec ce jeu de données. Par exemple : \"certaines données peuvent être secrétisées\"","code":""},{"path":"https://mtes-mct.github.io/didoscalim/reference/add_or_update_dataset.html","id":"valeur-de-retour","dir":"Reference","previous_headings":"","what":"Valeur de retour","title":"Ajoute ou met à jour un dataset — add_or_update_dataset","text":"un objet dido_dataset(). Ce dernier sert pour créer par la suite les datafiles, les millésimes et les attachments","code":""},{"path":[]},{"path":"https://mtes-mct.github.io/didoscalim/reference/add_or_update_dataset.html","id":"ref-examples","dir":"Reference","previous_headings":"","what":"Exemples","title":"Ajoute ou met à jour un dataset — add_or_update_dataset","text":"","code":"dataset <- add_or_update_dataset(   title = \"Des données statistiques\",   description = \"Description des données statistiques\",   topic = \"Transports\",   frequency = \"annual\",   frequency_date = \"2021-01-10\",   temporal_coverage_start = \"2020-01-01\",   temporal_coverage_end = \"2020-12-31\" ) #> dataset \"Des données statistiques\" modifié  dataset <- add_or_update_dataset(   title = \"Des données statistiques\",   description = \"Description des données statistiques\",   topic = \"Transports\",   frequency = \"annual\",   frequency_date = \"2022-01-10\",   temporal_coverage_start = \"2021-01-01\",   temporal_coverage_end = \"2021-12-31\" ) #> dataset \"Des données statistiques\" modifié"},{"path":"https://mtes-mct.github.io/didoscalim/reference/check_envs.html","id":null,"dir":"Reference","previous_headings":"","what":"Vérifier l'accès aux différents environnements — check_envs","title":"Vérifier l'accès aux différents environnements — check_envs","text":"Affiche un état des connexions aux différents environnements avec le message d'erreur le cas échéant","code":""},{"path":"https://mtes-mct.github.io/didoscalim/reference/check_envs.html","id":"ref-usage","dir":"Reference","previous_headings":"","what":"Utilisation","title":"Vérifier l'accès aux différents environnements — check_envs","text":"","code":"check_envs()"},{"path":"https://mtes-mct.github.io/didoscalim/reference/check_envs.html","id":"ref-examples","dir":"Reference","previous_headings":"","what":"Exemples","title":"Vérifier l'accès aux différents environnements — check_envs","text":"","code":"check_envs() #> ✖ Environnement DiDo actif : DEV #> ✖ Environnement DiDo actif : PREPROD #> ✖ Environnement DiDo actif : PROD #> Test de connexion: #> ℹ DEV: OK #> ✖ PREPROD: KO: ✖ Client error : 404 ℹ url: http://api.alimentation.dido.fr//users/me #> ℹ PROD: OK #> ✖ Environnement DiDo actif : DEV"},{"path":"https://mtes-mct.github.io/didoscalim/reference/check_import_file.html","id":null,"dir":"Reference","previous_headings":"","what":"Vérifie un fichier CSV — check_import_file","title":"Vérifie un fichier CSV — check_import_file","text":"Cette fonction permet de vérifier rapidement la validité d'un fichier de données. Elle : créé un jeu de données avec un nom aléatoire ajoute le fichier de données supprime le jeu de données affiche les erreurs rencontrées s'il y en L'import de test ne se fera jamais sur l'environnement de production mais sur un des environnments DEV, PREPROD ou ECOLE. Si aucun de ces environnements n'est configuré, la fonction remonte une erreur","code":""},{"path":"https://mtes-mct.github.io/didoscalim/reference/check_import_file.html","id":"ref-usage","dir":"Reference","previous_headings":"","what":"Utilisation","title":"Vérifie un fichier CSV — check_import_file","text":"","code":"check_import_file(file_name)"},{"path":"https://mtes-mct.github.io/didoscalim/reference/check_import_file.html","id":"arguments","dir":"Reference","previous_headings":"","what":"Arguments","title":"Vérifie un fichier CSV — check_import_file","text":"file_name le fichier valider","code":""},{"path":"https://mtes-mct.github.io/didoscalim/reference/check_import_file.html","id":"valeur-de-retour","dir":"Reference","previous_headings":"","what":"Valeur de retour","title":"Vérifie un fichier CSV — check_import_file","text":"TRUE si l'import s'est bien passé, FALSE sinon","code":""},{"path":"https://mtes-mct.github.io/didoscalim/reference/check_import_file.html","id":"ref-examples","dir":"Reference","previous_headings":"","what":"Exemples","title":"Vérifie un fichier CSV — check_import_file","text":"","code":"check_import_file(dido_example(\"file-with-error.csv\")) #> ✖ Problème sur le fichier `/home/nc/travail/R/didoscalim/inst/extdata/file-with-error.csv` #> ✖ Le fichier est invalide #> ✖ colonne_1: La description est requise #> ✖ colonne_2: Le type anneee n'est pas un type connu. #> [1] FALSE"},{"path":"https://mtes-mct.github.io/didoscalim/reference/clean_metadata.html","id":null,"dir":"Reference","previous_headings":"","what":"Prépare un objet pour l'envoyer à DiDo — clean_metadata","title":"Prépare un objet pour l'envoyer à DiDo — clean_metadata","text":"Les objets dido_dataset() et dido_datafile() retournés par get_dataset(), get_datafile(), ... portent des informations sur les objets enfants (fichiers annexes, datafiles, millésimes...). Cette fonction permet de les supprimer pour ne garder que les métadonnées propres à l'objet.","code":""},{"path":"https://mtes-mct.github.io/didoscalim/reference/clean_metadata.html","id":"ref-usage","dir":"Reference","previous_headings":"","what":"Utilisation","title":"Prépare un objet pour l'envoyer à DiDo — clean_metadata","text":"","code":"clean_metadata(data)"},{"path":"https://mtes-mct.github.io/didoscalim/reference/clean_metadata.html","id":"arguments","dir":"Reference","previous_headings":"","what":"Arguments","title":"Prépare un objet pour l'envoyer à DiDo — clean_metadata","text":"data objet dido_dataset, dido_datafile","code":""},{"path":"https://mtes-mct.github.io/didoscalim/reference/clean_metadata.html","id":"valeur-de-retour","dir":"Reference","previous_headings":"","what":"Valeur de retour","title":"Prépare un objet pour l'envoyer à DiDo — clean_metadata","text":"un objet du même type avec uniquement ses métadonnées propres.","code":""},{"path":"https://mtes-mct.github.io/didoscalim/reference/clean_metadata.html","id":"ref-examples","dir":"Reference","previous_headings":"","what":"Exemples","title":"Prépare un objet pour l'envoyer à DiDo — clean_metadata","text":"","code":"dataset <- get_dataset(list_datasets()[1, ]) clean_metadata(dataset) #> List of 15 #>  $ id               : chr \"653b8ab94621a22eac5ae76f\" #>  $ title            : chr \"Des données statistiques\" #>  $ description      : chr \"Description des données statistiques\" #>  $ topic            : chr \"Transports\" #>  $ tags             : list() #>  $ license          : chr \"fr-lo\" #>  $ frequency        : chr \"annual\" #>  $ frequency_date   : chr \"2022-01-10\" #>  $ spatial          :List of 2 #>   ..$ granularity: chr \"other\" #>   ..$ zones      : list() #>  $ temporal_coverage:List of 2 #>   ..$ end  : chr \"2021-12-31\" #>   ..$ start: chr \"2021-01-01\" #>  $ created_at       : chr \"2023-10-27T10:02:33.987Z\" #>  $ last_modified    : chr \"2023-10-27T10:03:14.107Z\" #>  $ last_update      : chr \"2023-10-27T10:02:34.118Z\" #>  $ url              : chr \"http://catalogue.diffusion.dido.fr/catalog.html?page=dataset&datasetId=653b8ab94621a22eac5ae76f\" #>  $ organization     :List of 2 #>   ..$ id   : chr \"63d91dc9eaf72df01567c4fb\" #>   ..$ title: chr \"BSI\" #>  - attr(*, \"class\")= chr [1:2] \"dido_dataset\" \"list\"  datafile <- get_datafile(list_datafiles()[1, ]) clean_metadata(datafile) #> List of 10 #>  $ rid              : chr \"5a642e97-edd5-41ed-994c-ed3bd362c4a2\" #>  $ title            : chr \"titre\" #>  $ description      : chr \"description\" #>  $ millesimes       : int 2 #>  $ created_at       : chr \"2023-10-27T10:03:02.879Z\" #>  $ last_modified    : chr \"2023-10-27T10:03:13.716Z\" #>  $ published        : chr \"2023-10-27T10:03:00.000Z\" #>  $ url              : chr \"http://catalogue.diffusion.dido.fr/catalog.html?page=datafile&datafileRid=5a642e97-edd5-41ed-994c-ed3bd362c4a2\" #>  $ temporal_coverage:List of 2 #>   ..$ start: chr \"2021-01-01\" #>   ..$ end  : chr \"2021-12-31\" #>  $ legal_notice     : chr \"SDES\" #>  - attr(*, \"id\")= chr \"653b8ad4f1d5ba21435ae768\" #>  - attr(*, \"class\")= chr [1:2] \"dido_datafile\" \"list\""},{"path":"https://mtes-mct.github.io/didoscalim/reference/date_heure_iso8601.html","id":null,"dir":"Reference","previous_headings":"","what":"Retourne une date au format ISO 8601 avec la TZ — date_heure_iso8601","title":"Retourne une date au format ISO 8601 avec la TZ — date_heure_iso8601","text":"Retourne une date au format ISO 8601 avec la TZ","code":""},{"path":"https://mtes-mct.github.io/didoscalim/reference/date_heure_iso8601.html","id":"ref-usage","dir":"Reference","previous_headings":"","what":"Utilisation","title":"Retourne une date au format ISO 8601 avec la TZ — date_heure_iso8601","text":"","code":"date_heure_iso8601(date_heure)"},{"path":"https://mtes-mct.github.io/didoscalim/reference/date_heure_iso8601.html","id":"arguments","dir":"Reference","previous_headings":"","what":"Arguments","title":"Retourne une date au format ISO 8601 avec la TZ — date_heure_iso8601","text":"date_heure date/heure","code":""},{"path":"https://mtes-mct.github.io/didoscalim/reference/date_heure_iso8601.html","id":"valeur-de-retour","dir":"Reference","previous_headings":"","what":"Valeur de retour","title":"Retourne une date au format ISO 8601 avec la TZ — date_heure_iso8601","text":"une date/heure au format ISO  8601 avec la TZ","code":""},{"path":"https://mtes-mct.github.io/didoscalim/reference/date_heure_iso8601.html","id":"ref-examples","dir":"Reference","previous_headings":"","what":"Exemples","title":"Retourne une date au format ISO 8601 avec la TZ — date_heure_iso8601","text":"","code":"date_heure_iso8601(\"2022-02-02 07:00:02\") #> [1] \"2022-02-02T07:00:02+0100\""},{"path":"https://mtes-mct.github.io/didoscalim/reference/delete_attachment.html","id":null,"dir":"Reference","previous_headings":"","what":"Supprime un attachment — delete_attachment","title":"Supprime un attachment — delete_attachment","text":"Supprime un attachment","code":""},{"path":"https://mtes-mct.github.io/didoscalim/reference/delete_attachment.html","id":"ref-usage","dir":"Reference","previous_headings":"","what":"Utilisation","title":"Supprime un attachment — delete_attachment","text":"","code":"delete_attachment(attachment)"},{"path":"https://mtes-mct.github.io/didoscalim/reference/delete_attachment.html","id":"arguments","dir":"Reference","previous_headings":"","what":"Arguments","title":"Supprime un attachment — delete_attachment","text":"attachment un objet attachment retourné par get_attachment(), add_attachment()","code":""},{"path":"https://mtes-mct.github.io/didoscalim/reference/delete_attachment.html","id":"valeur-de-retour","dir":"Reference","previous_headings":"","what":"Valeur de retour","title":"Supprime un attachment — delete_attachment","text":"TRUE","code":""},{"path":[]},{"path":"https://mtes-mct.github.io/didoscalim/reference/delete_attachment.html","id":"ref-examples","dir":"Reference","previous_headings":"","what":"Exemples","title":"Supprime un attachment — delete_attachment","text":"","code":"library(dplyr, warn.conflicts = FALSE)  dataset <- add_or_update_dataset(   title = \"Un dataset pour les attachements\",   description = \"Description des données statistiques\",   topic = \"Transports\",   frequency = \"unknown\", ) #> dataset `Un dataset pour les attachements` créé  attachment <- add_attachment(   dataset = dataset,   title = \"title\",   description = \"description\",   file_name = dido_example(\"attachment.txt\") ) #>     intégration du fichier annexe `attachment.txt` #> \t* fichier versé #> \t* fichier annexe intégré (rid: 41f39b9f-0dc7-4088-ac04-20656666e7e3) delete_attachment(attachment)"},{"path":"https://mtes-mct.github.io/didoscalim/reference/delete_datafile.html","id":null,"dir":"Reference","previous_headings":"","what":"Supprime un datafile. — delete_datafile","title":"Supprime un datafile. — delete_datafile","text":"Supprime un datafile.","code":""},{"path":"https://mtes-mct.github.io/didoscalim/reference/delete_datafile.html","id":"ref-usage","dir":"Reference","previous_headings":"","what":"Utilisation","title":"Supprime un datafile. — delete_datafile","text":"","code":"delete_datafile(datafile)"},{"path":"https://mtes-mct.github.io/didoscalim/reference/delete_datafile.html","id":"arguments","dir":"Reference","previous_headings":"","what":"Arguments","title":"Supprime un datafile. — delete_datafile","text":"datafile un objet datafile retourné par get_datafile(), add_datafile()","code":""},{"path":"https://mtes-mct.github.io/didoscalim/reference/delete_datafile.html","id":"valeur-de-retour","dir":"Reference","previous_headings":"","what":"Valeur de retour","title":"Supprime un datafile. — delete_datafile","text":"TRUE","code":""},{"path":[]},{"path":"https://mtes-mct.github.io/didoscalim/reference/delete_dataset.html","id":null,"dir":"Reference","previous_headings":"","what":"Supprime un dataset — delete_dataset","title":"Supprime un dataset — delete_dataset","text":"Supprime un dataset","code":""},{"path":"https://mtes-mct.github.io/didoscalim/reference/delete_dataset.html","id":"ref-usage","dir":"Reference","previous_headings":"","what":"Utilisation","title":"Supprime un dataset — delete_dataset","text":"","code":"delete_dataset(dataset)"},{"path":"https://mtes-mct.github.io/didoscalim/reference/delete_dataset.html","id":"arguments","dir":"Reference","previous_headings":"","what":"Arguments","title":"Supprime un dataset — delete_dataset","text":"dataset un identifiant de dataset","code":""},{"path":"https://mtes-mct.github.io/didoscalim/reference/delete_dataset.html","id":"valeur-de-retour","dir":"Reference","previous_headings":"","what":"Valeur de retour","title":"Supprime un dataset — delete_dataset","text":"TRUE","code":""},{"path":"https://mtes-mct.github.io/didoscalim/reference/delete_millesime.html","id":null,"dir":"Reference","previous_headings":"","what":"Supprimer un millésime — delete_millesime","title":"Supprimer un millésime — delete_millesime","text":"Supprimer un millésime","code":""},{"path":"https://mtes-mct.github.io/didoscalim/reference/delete_millesime.html","id":"ref-usage","dir":"Reference","previous_headings":"","what":"Utilisation","title":"Supprimer un millésime — delete_millesime","text":"","code":"delete_millesime(datafile, millesime)"},{"path":"https://mtes-mct.github.io/didoscalim/reference/delete_millesime.html","id":"arguments","dir":"Reference","previous_headings":"","what":"Arguments","title":"Supprimer un millésime — delete_millesime","text":"datafile un objet dido_datafile obtenu par get_datafile() millesime le millesime (AAAA-MM). Par défaut AAAA-MM avec l'année courante et le mois courant","code":""},{"path":"https://mtes-mct.github.io/didoscalim/reference/delete_millesime.html","id":"valeur-de-retour","dir":"Reference","previous_headings":"","what":"Valeur de retour","title":"Supprimer un millésime — delete_millesime","text":"TRUE","code":""},{"path":[]},{"path":"https://mtes-mct.github.io/didoscalim/reference/dido_api.html","id":null,"dir":"Reference","previous_headings":"","what":"Envoie une requête au serveur DiDo — dido_api","title":"Envoie une requête au serveur DiDo — dido_api","text":"Envoie la requête au serveur et retourne le résultat sous forme d'un objet ou un dataframe si as_dataframe est à TRUE","code":""},{"path":"https://mtes-mct.github.io/didoscalim/reference/dido_api.html","id":"ref-usage","dir":"Reference","previous_headings":"","what":"Utilisation","title":"Envoie une requête au serveur DiDo — dido_api","text":"","code":"dido_api(   method,   path,   body = NULL,   query_params = list(),   headers = c(),   as_tibble = FALSE,   progress = FALSE )"},{"path":"https://mtes-mct.github.io/didoscalim/reference/dido_api.html","id":"arguments","dir":"Reference","previous_headings":"","what":"Arguments","title":"Envoie une requête au serveur DiDo — dido_api","text":"method une des méthodes GET/POST/PUT/DELETE path le chemin de l'api body le body de la requête query_params les paramètres de la requête headers les entêtes de la requête as_tibble TRUE/FALSE si TRUE retourne un tibble à la place d'un objet. Défaut à FALSE","code":""},{"path":"https://mtes-mct.github.io/didoscalim/reference/dido_api.html","id":"valeur-de-retour","dir":"Reference","previous_headings":"","what":"Valeur de retour","title":"Envoie une requête au serveur DiDo — dido_api","text":"un objet json ou un dataframe","code":""},{"path":"https://mtes-mct.github.io/didoscalim/reference/dido_api.html","id":"ref-examples","dir":"Reference","previous_headings":"","what":"Exemples","title":"Envoie une requête au serveur DiDo — dido_api","text":"","code":"alerts <- dido_api(method = \"GET\", path = \"/datasets/alerts\", as_tibble = TRUE)"},{"path":"https://mtes-mct.github.io/didoscalim/reference/dido_attachment.html","id":null,"dir":"Reference","previous_headings":"","what":"L'objet dido_attachment — dido_attachment","title":"L'objet dido_attachment — dido_attachment","text":"L'objet dido_attachment inclus les champs : rid l'identifiant du jeu de données parent title type description created_at last_modified published url : l'url du fichier annexe","code":""},{"path":[]},{"path":"https://mtes-mct.github.io/didoscalim/reference/dido_csv.html","id":null,"dir":"Reference","previous_headings":"","what":"Génère les lignes d'entête du CSV augmenté — dido_csv","title":"Génère les lignes d'entête du CSV augmenté — dido_csv","text":"Génère un dataframe avec les lignes d'entêtes du CSV augmenté comme premières lignes.","code":""},{"path":"https://mtes-mct.github.io/didoscalim/reference/dido_csv.html","id":"ref-usage","dir":"Reference","previous_headings":"","what":"Utilisation","title":"Génère les lignes d'entête du CSV augmenté — dido_csv","text":"","code":"dido_csv(   data,   params = list(),   locale = readr::default_locale(),   cog_year = format(Sys.time(), \"%Y\") )"},{"path":"https://mtes-mct.github.io/didoscalim/reference/dido_csv.html","id":"arguments","dir":"Reference","previous_headings":"","what":"Arguments","title":"Génère les lignes d'entête du CSV augmenté — dido_csv","text":"data le dataframe à augmenter params une liste nommée décrivant les caractéristiques des colonnes :   Les caractéristiques disponibles sont : name: le nom de la colonne description: la description de la colonne type: nombre, entier, texte, ... unit: l'unité de la colonne Le nom de la colonne peut être une expression rationnelle :   La première colonne correspondante est utilisée, mettez toujours vos expressions rationnelles à la fin. La valeur du champ description est évaluée par glue::glue avec un paramètre name qui correspond au nom de la variable du dataframe d'origine.   locale la locale à utiliser. Le seul élément à configurer à ce niveau est le séparateur décimal. Par défaut c'est le point (.). Pour sélectionner la virgule vous pouvez utiliser :   cog_year le millésime du COG utilisé si besoin. Par défaut prend l'année en cours","code":"list(   COL1 = list(description = \"une description\"),   COL2 = list(unit = \"MWh\") ) list(   COL     = list(description = \"une description\"),   `COL.*` = list(unit = \"MWh\") ) list(   COL     = list(description = \"une description\"),   `COL.*` = list(     unit = \"MWh\",     description = \"une description {string::str_extract(name, '\\\\d{4}')}\"   ) ) locale = locale(decimal_mark = \",\")"},{"path":"https://mtes-mct.github.io/didoscalim/reference/dido_csv.html","id":"valeur-de-retour","dir":"Reference","previous_headings":"","what":"Valeur de retour","title":"Génère les lignes d'entête du CSV augmenté — dido_csv","text":"un dataframe avec les 4 lignes de description du csv augmenté","code":""},{"path":"https://mtes-mct.github.io/didoscalim/reference/dido_csv.html","id":"d-tails","dir":"Reference","previous_headings":"","what":"Détails","title":"Génère les lignes d'entête du CSV augmenté — dido_csv","text":"Cette fonction essaye de deviner le type des colonnes pour leur donner un type DiDo de base : ** il est fortement déconseillé d'utiliser le type DiDo nombre. Utilisez plutôt un nombre avec précision comme par exemple nombre(2)** Certains noms de variable sont connus par didoscalim qui génère automatiquement le type et la description. La liste complète de ces variables et des types/descriptions associés est : L'année AAAA est par défaut l'année courante, vous pouvez la modifier en passant le paramètre cog_year","code":""},{"path":[]},{"path":"https://mtes-mct.github.io/didoscalim/reference/dido_csv.html","id":"ref-examples","dir":"Reference","previous_headings":"","what":"Exemples","title":"Génère les lignes d'entête du CSV augmenté — dido_csv","text":"","code":"data <- data.frame(   OPERATEUR = c(\"nom1\", \"nom2\"),   COMMUNE = c(\"29000\", \"35000\"),   CONSO = c(1, 2) ) params <- list(   OPERATEUR = list(description = \"L'opérateur\"),   CONSO = list(name = \"CONSOMMATION\", description = \"La consommation\", unit = \"Mwh\") ) dido_csv(data, params = params) #> # A tibble: 6 × 3 #>   OPERATEUR   COMMUNE            CONSO           #>   <chr>       <chr>              <chr>           #> 1 L'opérateur Code de la commune La consommation #> 2 texte       cog_commune_2023   entier          #> 3 n/a         n/a                Mwh             #> 4 OPERATEUR   COMMUNE            CONSOMMATION    #> 5 nom1        29000              1               #> 6 nom2        35000              2                data <- data.frame(   DONNEES_2021 = c(\"1,4\", \"1,5\"),   DONNEES_2022 = c(\"1,3\", \"1,8\") ) params <- list(   `DONNEES_.*` = list(     description = 'description pour {stringr::str_extract(name, \"\\\\\\\\d{4}\")}'   ) ) dido_csv(data, params = params, locale = locale(decimal_mark = \",\")) #> Warning: ✖ Vous utilisez un type `nombre` dans vos entêtes. #> ℹ Il est recommandé d'utiliser un type nombre avec précision : `nombre(2)`. #> # A tibble: 6 × 2 #>   DONNEES_2021          DONNEES_2022          #>   <chr>                 <chr>                 #> 1 description pour 2021 description pour 2022 #> 2 nombre                nombre                #> 3 s/u                   s/u                   #> 4 DONNEES_2021          DONNEES_2022          #> 5 1,4                   1,3                   #> 6 1,5                   1,8"},{"path":"https://mtes-mct.github.io/didoscalim/reference/dido_datafile.html","id":null,"dir":"Reference","previous_headings":"","what":"L'objet dido_datafile — dido_datafile","title":"L'objet dido_datafile — dido_datafile","text":"L'objet dido_datafile et retourné par get_datafile() et peut-être utilisé en paramètre par les fonctions de manipulation de dataset, datafile, millésime et attachement. Il les champs suivants : rid l'identifiant du datafile title description millesimes le nb de millésimes dans le datafile created_at last_modified published url temporal_coverage un liste avec deux champs start et end legal_notice la licence s'appliquant au fichier de données millesimes_info comprenant une liste des millésimes rattachés le dernier champ est supprimé par clean_metadata() L'objet également un attribut id avec l'identifiant du dataset auquel il appartient","code":""},{"path":[]},{"path":"https://mtes-mct.github.io/didoscalim/reference/dido_dataset.html","id":null,"dir":"Reference","previous_headings":"","what":"L'objet dido_dataset — dido_dataset","title":"L'objet dido_dataset — dido_dataset","text":"L'objet dido_dataset est retourné par get_dataset() et add_dataset() et utilisé en paramètre par update_dataset(), add_datafile() et create_attachment(). Il les champs suivants : id l'identifiant du dataset title description organization topic le thème license frequency la fréquence frequency_date prochaine mise à jour tags une liste de mots clefs spatial une liste avec des champs, la granularity et zones une liste de zones temporal_coverage un liste avec deux champs start et end created_at la date de création last_modified last_update attachments une liste des attachments datafiles une liste des fichiers de données les deux derniers champs sont supprimés par clean_metadata()","code":""},{"path":[]},{"path":"https://mtes-mct.github.io/didoscalim/reference/dido_example.html","id":null,"dir":"Reference","previous_headings":"","what":"Retourne le chemin du fichier exemple données ou le chemin des fichiers\nexemple — dido_example","title":"Retourne le chemin du fichier exemple données ou le chemin des fichiers\nexemple — dido_example","text":"Les fichiers exemples sont stockés dans inst/extdata","code":""},{"path":"https://mtes-mct.github.io/didoscalim/reference/dido_example.html","id":"ref-usage","dir":"Reference","previous_headings":"","what":"Utilisation","title":"Retourne le chemin du fichier exemple données ou le chemin des fichiers\nexemple — dido_example","text":"","code":"dido_example(file = NULL)"},{"path":"https://mtes-mct.github.io/didoscalim/reference/dido_example.html","id":"arguments","dir":"Reference","previous_headings":"","what":"Arguments","title":"Retourne le chemin du fichier exemple données ou le chemin des fichiers\nexemple — dido_example","text":"file le nom du fichier. Si NULL les exemples sont listés.","code":""},{"path":"https://mtes-mct.github.io/didoscalim/reference/dido_example.html","id":"ref-examples","dir":"Reference","previous_headings":"","what":"Exemples","title":"Retourne le chemin du fichier exemple données ou le chemin des fichiers\nexemple — dido_example","text":"","code":"dido_example() #> [1] \"attachment.txt\"      \"augmente.csv\"        \"csv-win-char.csv\"    #> [4] \"exemple.csv\"         \"file-with-error.csv\" dido_example(\"exemple.csv\") #> [1] \"/home/nc/travail/R/didoscalim/inst/extdata/exemple.csv\""},{"path":"https://mtes-mct.github.io/didoscalim/reference/dido_job.html","id":null,"dir":"Reference","previous_headings":"","what":"L'objet dido_job — dido_job","title":"L'objet dido_job — dido_job","text":"L'objet dido_job est retourné par les fonctions add_datafile(), add_millesime() et replace_millesime(), il peut être utilisé en argument pour les fonctions add_dataset(), add_datafile() Il les champs suivant : owner : l'id du propriétaire du job state l'état du job. Devrait être \"complete\" ou \"failed\" data les informations liées à la tâche, le champ dataset_id result : le résultat qui comprend lui même les champs : rid l'identifiant du fichier de données duration le temps de traitement","code":""},{"path":"https://mtes-mct.github.io/didoscalim/reference/dido_me.html","id":null,"dir":"Reference","previous_headings":"","what":"L'objet dido_me — dido_me","title":"L'objet dido_me — dido_me","text":"L'objet dido_me est retourné par ()","code":""},{"path":"https://mtes-mct.github.io/didoscalim/reference/dido_read_delim.html","id":null,"dir":"Reference","previous_headings":"","what":"Lit un fichier CSV — dido_read_delim","title":"Lit un fichier CSV — dido_read_delim","text":"Cette fonction utilise directement readr::read_delim en enlevant la détection du type des colonnes et en fixant delim à \";\" par défaut.","code":""},{"path":"https://mtes-mct.github.io/didoscalim/reference/dido_read_delim.html","id":"ref-usage","dir":"Reference","previous_headings":"","what":"Utilisation","title":"Lit un fichier CSV — dido_read_delim","text":"","code":"dido_read_delim(file, delim = \";\", ...)"},{"path":"https://mtes-mct.github.io/didoscalim/reference/dido_read_delim.html","id":"arguments","dir":"Reference","previous_headings":"","what":"Arguments","title":"Lit un fichier CSV — dido_read_delim","text":"file Either path file, connection, literal data (either single string raw vector). Files ending .gz, .bz2, .xz, .zip automatically uncompressed. Files starting http://, https://, ftp://, ftps:// automatically downloaded. Remote gz files can also automatically downloaded decompressed. Literal data useful examples tests. recognised literal data, input must either wrapped (), string containing least one new line, vector containing least one string new line. Using value clipboard() read system clipboard. delim le séparateur de champ. Par défaut \";\". ... ces arguments seront passés directement à la fonction readr::read_delim() locale la locale à utiliser pour lire les fichiers. ce niveau, le paramètre le plus important est l'encodage du fichier. Le défaut est \"UTF-8\". Les autres encodages fréquemment rencontrés sont \"WINDOWS-1252\" et \"ISO-8859-15\"","code":""},{"path":"https://mtes-mct.github.io/didoscalim/reference/dido_read_delim.html","id":"valeur-de-retour","dir":"Reference","previous_headings":"","what":"Valeur de retour","title":"Lit un fichier CSV — dido_read_delim","text":"un tibble dont toutes les colonnes sont de type chr","code":""},{"path":"https://mtes-mct.github.io/didoscalim/reference/dido_read_delim.html","id":"d-tails","dir":"Reference","previous_headings":"","what":"Détails","title":"Lit un fichier CSV — dido_read_delim","text":"Certaines variables peuvent avoir des valeurs secrétisées représentées par la valeur secret, la détection automatique du package readr n'est donc pas fiable et est désactivé à ce niveau. La détection automatique est faite dans la fonction dido_csv().","code":""},{"path":[]},{"path":"https://mtes-mct.github.io/didoscalim/reference/dido_read_delim.html","id":"ref-examples","dir":"Reference","previous_headings":"","what":"Exemples","title":"Lit un fichier CSV — dido_read_delim","text":"","code":"dido_read_delim(dido_example(\"exemple.csv\")) #> # A tibble: 5 × 8 #>   OPE   ANNEE FILIERE EPCI      CAT     NAF2  GS    CONSO  #>   <chr> <chr> <chr>   <chr>     <chr>   <chr> <chr> <chr>  #> 1 Aé    2019  G       200036465 RES     NA    R     1039   #> 2 ESL   2019  G       200034023 ENT_PRO NA    I     552    #> 3 ÇÀ    2019  G       200034270 RES     NA    R     75914  #> 4 RGDS  2019  G       200034635 ENT     10    I     454    #> 5 SîCÂE 2019  G       200037059 ENT_PRO NA    I     288821 dido_read_delim(dido_example(\"csv-win-char.csv\"),   delim = \",\",   locale = locale(encoding = \"WINDOWS-1252\") ) #> # A tibble: 5 × 8 #>   OPE   ANNEE FILIERE EPCI      CAT     NAF2  GS    CONSO  #>   <chr> <chr> <chr>   <chr>     <chr>   <chr> <chr> <chr>  #> 1 Aé    2019  G       200036465 RES     NA    R     1039   #> 2 ESL   2019  G       200034023 ENT_PRO NA    I     552    #> 3 ÇÀ    2019  G       200034270 RES     NA    R     75914  #> 4 RGDS  2019  G       200034635 ENT     10    I     454    #> 5 SîCÂE 2019  G       200037059 ENT_PRO NA    I     288821"},{"path":"https://mtes-mct.github.io/didoscalim/reference/dido_upload_file.html","id":null,"dir":"Reference","previous_headings":"","what":"Verse un fichier de données à intégrer — dido_upload_file","title":"Verse un fichier de données à intégrer — dido_upload_file","text":"Verse un fichier de données à intégrer","code":""},{"path":"https://mtes-mct.github.io/didoscalim/reference/dido_upload_file.html","id":"ref-usage","dir":"Reference","previous_headings":"","what":"Utilisation","title":"Verse un fichier de données à intégrer — dido_upload_file","text":"","code":"dido_upload_file(file_name)"},{"path":"https://mtes-mct.github.io/didoscalim/reference/dido_upload_file.html","id":"arguments","dir":"Reference","previous_headings":"","what":"Arguments","title":"Verse un fichier de données à intégrer — dido_upload_file","text":"file_name le nom du fichier","code":""},{"path":"https://mtes-mct.github.io/didoscalim/reference/dido_upload_file.html","id":"valeur-de-retour","dir":"Reference","previous_headings":"","what":"Valeur de retour","title":"Verse un fichier de données à intégrer — dido_upload_file","text":"un token","code":""},{"path":"https://mtes-mct.github.io/didoscalim/reference/dido_upload_file.html","id":"ref-examples","dir":"Reference","previous_headings":"","what":"Exemples","title":"Verse un fichier de données à intégrer — dido_upload_file","text":"","code":"token <- dido_upload_file(dido_example(\"attachment.txt\"))"},{"path":"https://mtes-mct.github.io/didoscalim/reference/dido_write_csv.html","id":null,"dir":"Reference","previous_headings":"","what":"Enregistre le fichier CSV augmenté généré — dido_write_csv","title":"Enregistre le fichier CSV augmenté généré — dido_write_csv","text":"Enregistre le fichier CSV augmenté généré","code":""},{"path":"https://mtes-mct.github.io/didoscalim/reference/dido_write_csv.html","id":"ref-usage","dir":"Reference","previous_headings":"","what":"Utilisation","title":"Enregistre le fichier CSV augmenté généré — dido_write_csv","text":"","code":"dido_write_csv(data, file)"},{"path":"https://mtes-mct.github.io/didoscalim/reference/dido_write_csv.html","id":"arguments","dir":"Reference","previous_headings":"","what":"Arguments","title":"Enregistre le fichier CSV augmenté généré — dido_write_csv","text":"data un tibble retourné par dido_csv() file le nom du fichier","code":""},{"path":"https://mtes-mct.github.io/didoscalim/reference/dido_write_csv.html","id":"valeur-de-retour","dir":"Reference","previous_headings":"","what":"Valeur de retour","title":"Enregistre le fichier CSV augmenté généré — dido_write_csv","text":"le tibble passé en entrée","code":""},{"path":[]},{"path":"https://mtes-mct.github.io/didoscalim/reference/dido_write_csv.html","id":"ref-examples","dir":"Reference","previous_headings":"","what":"Exemples","title":"Enregistre le fichier CSV augmenté généré — dido_write_csv","text":"","code":"dido_read_delim(dido_example(\"exemple.csv\")) %>%   dido_csv() %>%   dido_write_csv(\"/tmp/fichier.csv\")"},{"path":"https://mtes-mct.github.io/didoscalim/reference/didoscalim-package.html","id":null,"dir":"Reference","previous_headings":"","what":"didoscalim: Charger des données dans DiDo — didoscalim-package","title":"didoscalim: Charger des données dans DiDo — didoscalim-package","text":"Ce package permet de charger des données dans DiDo en passant par l'API d'alimentation.","code":""},{"path":[]},{"path":"https://mtes-mct.github.io/didoscalim/reference/didoscalim-package.html","id":"auteur","dir":"Reference","previous_headings":"","what":"Auteur","title":"didoscalim: Charger des données dans DiDo — didoscalim-package","text":"Maintainer: Nicolas Chuche nicolas.chuche@developpement-durable.gouv.fr contributors: MTE CGDD [copyright holder]","code":""},{"path":"https://mtes-mct.github.io/didoscalim/reference/didoscalim_log.html","id":null,"dir":"Reference","previous_headings":"","what":"Journalisation et niveau de verbosité — didoscalim_log","title":"Journalisation et niveau de verbosité — didoscalim_log","text":"Des méthodes liées à la gestion de la verbosité et à la journalisation","code":""},{"path":"https://mtes-mct.github.io/didoscalim/reference/didoscalim_log.html","id":"ref-usage","dir":"Reference","previous_headings":"","what":"Utilisation","title":"Journalisation et niveau de verbosité — didoscalim_log","text":"","code":"local_didoscalim_verbosity(level, env = parent.frame())  with_didoscalim_verbosity(level, code)  didoscalim_debug(text, .envir = parent.frame())  didoscalim_info(text, .envir = parent.frame())  didoscalim_abort(   message = NULL,   ...,   class = NULL,   .envir = parent.frame(),   call = caller_env() )"},{"path":"https://mtes-mct.github.io/didoscalim/reference/didoscalim_log.html","id":"local-didoscalim-verbosity","dir":"Reference","previous_headings":"","what":"local_didoscalim_verbosity","title":"Journalisation et niveau de verbosité — didoscalim_log","text":"change le niveau de verbosité dans la suite du code au même scope","code":""},{"path":"https://mtes-mct.github.io/didoscalim/reference/didoscalim_log.html","id":"with-didoscalim-verbosity","dir":"Reference","previous_headings":"","what":"with_didoscalim_verbosity","title":"Journalisation et niveau de verbosité — didoscalim_log","text":"change le niveau de verbosité dans le bloc de code","code":""},{"path":"https://mtes-mct.github.io/didoscalim/reference/didoscalim_log.html","id":"didoscalim-debug-","dir":"Reference","previous_headings":"","what":"didoscalim_debug()","title":"Journalisation et niveau de verbosité — didoscalim_log","text":"affiche les messages de debug","code":""},{"path":"https://mtes-mct.github.io/didoscalim/reference/didoscalim_log.html","id":"didoscalim-info-","dir":"Reference","previous_headings":"","what":"didoscalim_info()","title":"Journalisation et niveau de verbosité — didoscalim_log","text":"affiche les messages d'info","code":""},{"path":"https://mtes-mct.github.io/didoscalim/reference/didoscalim_log.html","id":"didoscalim-abort","dir":"Reference","previous_headings":"","what":"didoscalim_abort","title":"Journalisation et niveau de verbosité — didoscalim_log","text":"affiche le message au niveau le plus elevé et lève une exception.","code":""},{"path":"https://mtes-mct.github.io/didoscalim/reference/didoscalim_update_only.html","id":null,"dir":"Reference","previous_headings":"","what":"Bloquer les créations de datasets, datafiles et attachments — didoscalim_update_only","title":"Bloquer les créations de datasets, datafiles et attachments — didoscalim_update_only","text":"didoscalim_update_only() permet d'autoriser ou d'interdire la création d'objets dans les fonctions add_or_update_dataset(), add_or_update_datafile() et add_or_update_attachment() dans la suite du programme","code":""},{"path":"https://mtes-mct.github.io/didoscalim/reference/didoscalim_update_only.html","id":"ref-usage","dir":"Reference","previous_headings":"","what":"Utilisation","title":"Bloquer les créations de datasets, datafiles et attachments — didoscalim_update_only","text":"","code":"didoscalim_update_only(bool)"},{"path":"https://mtes-mct.github.io/didoscalim/reference/didoscalim_update_only.html","id":"arguments","dir":"Reference","previous_headings":"","what":"Arguments","title":"Bloquer les créations de datasets, datafiles et attachments — didoscalim_update_only","text":"bool TRUE/FALSE, si TRUE bloque les créations","code":""},{"path":"https://mtes-mct.github.io/didoscalim/reference/didoscalim_update_only.html","id":"valeur-de-retour","dir":"Reference","previous_headings":"","what":"Valeur de retour","title":"Bloquer les créations de datasets, datafiles et attachments — didoscalim_update_only","text":"Le précédente valeur ou FALSE si non fixée","code":""},{"path":"https://mtes-mct.github.io/didoscalim/reference/didoscalim_update_only.html","id":"ref-examples","dir":"Reference","previous_headings":"","what":"Exemples","title":"Bloquer les créations de datasets, datafiles et attachments — didoscalim_update_only","text":"","code":"# bloque la création dans la suite du programme didoscalim_update_only(TRUE) #> ℹ Création de nouveaux objets : interdite  # autorise la création dans la suite du programme didoscalim_update_only(FALSE) #> ℹ Création de nouveaux objets : autorisée"},{"path":"https://mtes-mct.github.io/didoscalim/reference/didoscalim_verbosity.html","id":null,"dir":"Reference","previous_headings":"","what":"Voir et modifier le niveau de message de didoscalim — didoscalim_verbosity","title":"Voir et modifier le niveau de message de didoscalim — didoscalim_verbosity","text":"didoscalim_verbosity() retourne l'option nommée \"didoscalim_verbosity\", qui détermine la verbosité générale de didoscalim. Il y trois niveaux possibles : \"debug\": Niveau pour débugger \"info\" (défaut): Niveau normal d'information utile à l'utilisateur. \"silent\": Aucun message sauf les erreurs. Si vous souhaitez changer le niveau par défaut, il suffit d'utiliser option :","code":"options(   didoscalim_verbosity = \"silent\", )"},{"path":"https://mtes-mct.github.io/didoscalim/reference/didoscalim_verbosity.html","id":"ref-usage","dir":"Reference","previous_headings":"","what":"Utilisation","title":"Voir et modifier le niveau de message de didoscalim — didoscalim_verbosity","text":"","code":"didoscalim_verbosity()"},{"path":"https://mtes-mct.github.io/didoscalim/reference/didoscalim_verbosity.html","id":"ref-examples","dir":"Reference","previous_headings":"","what":"Exemples","title":"Voir et modifier le niveau de message de didoscalim — didoscalim_verbosity","text":"","code":"didoscalim_verbosity() #> [1] \"info\" options(   didoscalim_verbosity = \"silent\" ) didoscalim_verbosity() #> [1] \"silent\""},{"path":"https://mtes-mct.github.io/didoscalim/reference/find_by_column.html","id":null,"dir":"Reference","previous_headings":"","what":"cherche dans un tibble — find_by_column","title":"cherche dans un tibble — find_by_column","text":"cherche dans un tibble","code":""},{"path":"https://mtes-mct.github.io/didoscalim/reference/find_by_column.html","id":"ref-usage","dir":"Reference","previous_headings":"","what":"Utilisation","title":"cherche dans un tibble — find_by_column","text":"","code":"find_by_column(data, string, col, return = c(\"id\"))"},{"path":"https://mtes-mct.github.io/didoscalim/reference/find_by_column.html","id":"arguments","dir":"Reference","previous_headings":"","what":"Arguments","title":"cherche dans un tibble — find_by_column","text":"data le dataframe/tibble dans lequel rechercher string la chaine à chercher col la colonne dans laquelle chercher return_col vecteur de colonnes à retourner","code":""},{"path":"https://mtes-mct.github.io/didoscalim/reference/find_by_column.html","id":"valeur-de-retour","dir":"Reference","previous_headings":"","what":"Valeur de retour","title":"cherche dans un tibble — find_by_column","text":"un id","code":""},{"path":"https://mtes-mct.github.io/didoscalim/reference/find_by_column.html","id":"ref-examples","dir":"Reference","previous_headings":"","what":"Exemples","title":"cherche dans un tibble — find_by_column","text":"","code":"if (FALSE) { find_by_column(data, \"un titre\", \"title\") find_by_column(data = data, string = \"un titre\", \"title\", c(\"id\", \"rid\")) find_by_column(data = data, string = stringr::fixed(\"rid\"), \"rid\") }"},{"path":"https://mtes-mct.github.io/didoscalim/reference/get_attachment.html","id":null,"dir":"Reference","previous_headings":"","what":"Récupère les métadonnées d'un attachment — get_attachment","title":"Récupère les métadonnées d'un attachment — get_attachment","text":"Permet de récupérer les données d'un attachment","code":""},{"path":"https://mtes-mct.github.io/didoscalim/reference/get_attachment.html","id":"ref-usage","dir":"Reference","previous_headings":"","what":"Utilisation","title":"Récupère les métadonnées d'un attachment — get_attachment","text":"","code":"get_attachment(data = NULL, dataset = NULL)"},{"path":"https://mtes-mct.github.io/didoscalim/reference/get_attachment.html","id":"arguments","dir":"Reference","previous_headings":"","what":"Arguments","title":"Récupère les métadonnées d'un attachment — get_attachment","text":"data le résultat d'une recherche par list_attachments(), un rid de attachment, un objet dido_attachment() ou dido_job() dataset optionnel, le dataset parent de l'attachement.","code":""},{"path":"https://mtes-mct.github.io/didoscalim/reference/get_attachment.html","id":"valeur-de-retour","dir":"Reference","previous_headings":"","what":"Valeur de retour","title":"Récupère les métadonnées d'un attachment — get_attachment","text":"un objet dido_attachment()","code":""},{"path":[]},{"path":"https://mtes-mct.github.io/didoscalim/reference/get_attachment.html","id":"ref-examples","dir":"Reference","previous_headings":"","what":"Exemples","title":"Récupère les métadonnées d'un attachment — get_attachment","text":"","code":"library(dplyr, warn.conflicts = FALSE)  dataset <- add_or_update_dataset(   title = \"Un dataset pour les attachement\",   description = \"Description des données statistiques\",   topic = \"Transports\",   frequency = \"unknown\", )  add_or_update_attachment(   dataset = dataset,   title = \"title\",   description = \"description\",   file_name = dido_example(\"attachment.txt\") )  dataset %>%   list_attachments() %>%   slice(1) %>%   get_attachment() #> List of 10 #>  $ type         : chr \"documentation\" #>  $ rid          : chr \"c249c826-f74d-48fb-ab59-9a649e8881e2\" #>  $ title        : chr \"title\" #>  $ description  : chr \"description\" #>  $ created_at   : chr \"2023-10-27T10:03:00.395Z\" #>  $ last_modified: chr \"2023-10-27T10:03:17.996Z\" #>  $ published    : chr \"2023-10-27T10:03:00.000Z\" #>  $ url          : chr \"http://api.diffusion.dido.fr/files/c249c826-f74d-48fb-ab59-9a649e8881e2\" #>  $ remote       : logi FALSE #>  $ udataUrl     : chr \"http://udata.dido.fr/s/resources/un-dataset-pour-les-attachement/20231027-100317/attachment.txt\" #>  - attr(*, \"id\")= chr \"653b8ad45a03db3b885ae741\" #>  - attr(*, \"class\")= chr [1:2] \"dido_attachment\" \"list\""},{"path":"https://mtes-mct.github.io/didoscalim/reference/get_attachment_rid.html","id":null,"dir":"Reference","previous_headings":"","what":"Retourne l'attachment id de l'objet — get_attachment_rid","title":"Retourne l'attachment id de l'objet — get_attachment_rid","text":"Retourne l'attachment id de l'objet","code":""},{"path":"https://mtes-mct.github.io/didoscalim/reference/get_attachment_rid.html","id":"ref-usage","dir":"Reference","previous_headings":"","what":"Utilisation","title":"Retourne l'attachment id de l'objet — get_attachment_rid","text":"","code":"get_attachment_rid(data)"},{"path":"https://mtes-mct.github.io/didoscalim/reference/get_attachment_rid.html","id":"arguments","dir":"Reference","previous_headings":"","what":"Arguments","title":"Retourne l'attachment id de l'objet — get_attachment_rid","text":"data un objet dido_attachment ou une chaine","code":""},{"path":"https://mtes-mct.github.io/didoscalim/reference/get_attachment_rid.html","id":"valeur-de-retour","dir":"Reference","previous_headings":"","what":"Valeur de retour","title":"Retourne l'attachment id de l'objet — get_attachment_rid","text":"le rid de l'attachment","code":""},{"path":"https://mtes-mct.github.io/didoscalim/reference/get_attachment_rid.html","id":"ref-examples","dir":"Reference","previous_headings":"","what":"Exemples","title":"Retourne l'attachment id de l'objet — get_attachment_rid","text":"","code":"at <- list_attachments()[1, ] get_attachment_rid(at) #> [1] \"c249c826-f74d-48fb-ab59-9a649e8881e2\""},{"path":"https://mtes-mct.github.io/didoscalim/reference/get_datafile.html","id":null,"dir":"Reference","previous_headings":"","what":"Récupère un datafile — get_datafile","title":"Récupère un datafile — get_datafile","text":"Récupère les métadonnées d'un datafile","code":""},{"path":"https://mtes-mct.github.io/didoscalim/reference/get_datafile.html","id":"ref-usage","dir":"Reference","previous_headings":"","what":"Utilisation","title":"Récupère un datafile — get_datafile","text":"","code":"get_datafile(data = NULL, dataset = NULL)"},{"path":"https://mtes-mct.github.io/didoscalim/reference/get_datafile.html","id":"arguments","dir":"Reference","previous_headings":"","what":"Arguments","title":"Récupère un datafile — get_datafile","text":"data le résultat d'une recherche par list_datafiles(), un des objets dido_job() dido_datafile() oule rid d'un datafile dataset optionnel l'identifiant d'un dataset ou un objet dido_dataset()","code":""},{"path":"https://mtes-mct.github.io/didoscalim/reference/get_datafile.html","id":"valeur-de-retour","dir":"Reference","previous_headings":"","what":"Valeur de retour","title":"Récupère un datafile — get_datafile","text":"un objet dido_datafile","code":""},{"path":"https://mtes-mct.github.io/didoscalim/reference/get_datafile.html","id":"d-tails","dir":"Reference","previous_headings":"","what":"Détails","title":"Récupère un datafile — get_datafile","text":"Lève une exception si list_datasets() fourni en entrée retourne plus d'un dataset.","code":""},{"path":[]},{"path":"https://mtes-mct.github.io/didoscalim/reference/get_datafile.html","id":"ref-examples","dir":"Reference","previous_headings":"","what":"Exemples","title":"Récupère un datafile — get_datafile","text":"","code":"library(dplyr, warn.conflicts = FALSE)  datafile <- list_datafiles() %>%   slice(1) %>%   get_datafile(datafile)"},{"path":"https://mtes-mct.github.io/didoscalim/reference/get_datafile_rid.html","id":null,"dir":"Reference","previous_headings":"","what":"Retourne le datafile rid de l'objet — get_datafile_rid","title":"Retourne le datafile rid de l'objet — get_datafile_rid","text":"Retourne le datafile rid de l'objet","code":""},{"path":"https://mtes-mct.github.io/didoscalim/reference/get_datafile_rid.html","id":"ref-usage","dir":"Reference","previous_headings":"","what":"Utilisation","title":"Retourne le datafile rid de l'objet — get_datafile_rid","text":"","code":"get_datafile_rid(data)"},{"path":"https://mtes-mct.github.io/didoscalim/reference/get_datafile_rid.html","id":"arguments","dir":"Reference","previous_headings":"","what":"Arguments","title":"Retourne le datafile rid de l'objet — get_datafile_rid","text":"data un objet dido_datafile ou dido_job","code":""},{"path":"https://mtes-mct.github.io/didoscalim/reference/get_datafile_rid.html","id":"valeur-de-retour","dir":"Reference","previous_headings":"","what":"Valeur de retour","title":"Retourne le datafile rid de l'objet — get_datafile_rid","text":"le datafile id","code":""},{"path":"https://mtes-mct.github.io/didoscalim/reference/get_datafile_rid.html","id":"ref-examples","dir":"Reference","previous_headings":"","what":"Exemples","title":"Retourne le datafile rid de l'objet — get_datafile_rid","text":"","code":"df <- list_datafiles()[1, ] get_datafile_rid(df) #> [1] \"5a642e97-edd5-41ed-994c-ed3bd362c4a2\""},{"path":"https://mtes-mct.github.io/didoscalim/reference/get_dataset.html","id":null,"dir":"Reference","previous_headings":"","what":"Récupère les métadonnées d'un dataset — get_dataset","title":"Récupère les métadonnées d'un dataset — get_dataset","text":"Permet de récupérer les métadonnées d'un dataset en utilisant la sortie de la fonction list_datasets() ou un des objets dido_datafile(), dido_dataset(), dido_job()","code":""},{"path":"https://mtes-mct.github.io/didoscalim/reference/get_dataset.html","id":"ref-usage","dir":"Reference","previous_headings":"","what":"Utilisation","title":"Récupère les métadonnées d'un dataset — get_dataset","text":"","code":"get_dataset(data)"},{"path":"https://mtes-mct.github.io/didoscalim/reference/get_dataset.html","id":"arguments","dir":"Reference","previous_headings":"","what":"Arguments","title":"Récupère les métadonnées d'un dataset — get_dataset","text":"data la sortie d'une commande list_datasets(), un objet dido_dataset(), dido_job() ou dido_datafile() ou l'identifiant d'un dataset","code":""},{"path":"https://mtes-mct.github.io/didoscalim/reference/get_dataset.html","id":"valeur-de-retour","dir":"Reference","previous_headings":"","what":"Valeur de retour","title":"Récupère les métadonnées d'un dataset — get_dataset","text":"un objet dido_dataset()","code":""},{"path":"https://mtes-mct.github.io/didoscalim/reference/get_dataset.html","id":"d-tails","dir":"Reference","previous_headings":"","what":"Détails","title":"Récupère les métadonnées d'un dataset — get_dataset","text":"Lève une exception si list_datasets() fourni en entrée retourne plus d'un dataset.","code":""},{"path":[]},{"path":"https://mtes-mct.github.io/didoscalim/reference/get_dataset.html","id":"ref-examples","dir":"Reference","previous_headings":"","what":"Exemples","title":"Récupère les métadonnées d'un dataset — get_dataset","text":"","code":"library(dplyr, warn.conflicts = FALSE)  ds <- list_datasets() %>%   slice(1) %>%   get_dataset()"},{"path":"https://mtes-mct.github.io/didoscalim/reference/get_dataset_id.html","id":null,"dir":"Reference","previous_headings":"","what":"Retourne le dataset id de l'objet — get_dataset_id","title":"Retourne le dataset id de l'objet — get_dataset_id","text":"Retourne le dataset id de l'objet","code":""},{"path":"https://mtes-mct.github.io/didoscalim/reference/get_dataset_id.html","id":"ref-usage","dir":"Reference","previous_headings":"","what":"Utilisation","title":"Retourne le dataset id de l'objet — get_dataset_id","text":"","code":"get_dataset_id(data)"},{"path":"https://mtes-mct.github.io/didoscalim/reference/get_dataset_id.html","id":"arguments","dir":"Reference","previous_headings":"","what":"Arguments","title":"Retourne le dataset id de l'objet — get_dataset_id","text":"data un objet dido_dataset, dido_datafile ou dido_job","code":""},{"path":"https://mtes-mct.github.io/didoscalim/reference/get_dataset_id.html","id":"valeur-de-retour","dir":"Reference","previous_headings":"","what":"Valeur de retour","title":"Retourne le dataset id de l'objet — get_dataset_id","text":"le dataset id","code":""},{"path":"https://mtes-mct.github.io/didoscalim/reference/get_dataset_id.html","id":"ref-examples","dir":"Reference","previous_headings":"","what":"Exemples","title":"Retourne le dataset id de l'objet — get_dataset_id","text":"","code":"ds <- list_datasets()[1, ] get_dataset_id(ds) #> [1] \"653b8ad45a03db3b885ae741\""},{"path":"https://mtes-mct.github.io/didoscalim/reference/get_job.html","id":null,"dir":"Reference","previous_headings":"","what":"Récupére un job en particulier — get_job","title":"Récupére un job en particulier — get_job","text":"Récupére un job en particulier","code":""},{"path":"https://mtes-mct.github.io/didoscalim/reference/get_job.html","id":"ref-usage","dir":"Reference","previous_headings":"","what":"Utilisation","title":"Récupére un job en particulier — get_job","text":"","code":"get_job(data)"},{"path":"https://mtes-mct.github.io/didoscalim/reference/get_job.html","id":"arguments","dir":"Reference","previous_headings":"","what":"Arguments","title":"Récupére un job en particulier — get_job","text":"data l'id du job","code":""},{"path":"https://mtes-mct.github.io/didoscalim/reference/get_job.html","id":"valeur-de-retour","dir":"Reference","previous_headings":"","what":"Valeur de retour","title":"Récupére un job en particulier — get_job","text":"un objet dido_job()","code":""},{"path":"https://mtes-mct.github.io/didoscalim/reference/get_job.html","id":"ref-examples","dir":"Reference","previous_headings":"","what":"Exemples","title":"Récupére un job en particulier — get_job","text":"","code":"job <- list_jobs()[1, ] get_job(job) #> List of 5 #>  $ id    : int 1 #>  $ owner : chr \"63d91dc10eaf190021d90837\" #>  $ state :List of 4 #>   ..$ status    : chr \"complete\" #>   ..$ created_at: chr \"2023-10-27T10:02:24.222Z\" #>   ..$ started_at: chr \"2023-10-27T10:02:24.223Z\" #>   ..$ failed_at : chr \"2023-10-27T10:02:24.992Z\" #>  $ data  :List of 6 #>   ..$ task                             : chr \"createDatafile\" #>   ..$ file_name                        : chr \"augmente.csv\" #>   ..$ dataset_id                       : chr \"653b8aae5a03db3b885ae73d\" #>   ..$ datafile_millesime               : chr \"2021-12\" #>   ..$ datafile_metadata                :List of 4 #>   .. ..$ title       : chr \"Un fichier de données de test\" #>   .. ..$ description : chr \"Un fichier de données de test\" #>   .. ..$ published   : chr \"2023-10-27T10:02:22.000Z\" #>   .. ..$ legal_notice: chr \"SDES\" #>   ..$ datafile_millesime_date_diffusion: chr \"2023-10-27T10:02:22.000Z\" #>  $ result:List of 6 #>   ..$ rid        : chr \"ac646053-3f49-4bae-bed9-7f1452cc2f1f\" #>   ..$ millesime  : chr \"2021-12\" #>   ..$ duration   : int 1 #>   ..$ rows       : int 5 #>   ..$ csv_headers: int 8 #>   ..$ columns    : int 10 #>  - attr(*, \"class\")= chr [1:2] \"dido_job\" \"list\""},{"path":"https://mtes-mct.github.io/didoscalim/reference/get_job_id.html","id":null,"dir":"Reference","previous_headings":"","what":"Retourne l'attachment id de l'objet — get_job_id","title":"Retourne l'attachment id de l'objet — get_job_id","text":"Retourne l'attachment id de l'objet","code":""},{"path":"https://mtes-mct.github.io/didoscalim/reference/get_job_id.html","id":"ref-usage","dir":"Reference","previous_headings":"","what":"Utilisation","title":"Retourne l'attachment id de l'objet — get_job_id","text":"","code":"get_job_id(data)"},{"path":"https://mtes-mct.github.io/didoscalim/reference/get_job_id.html","id":"arguments","dir":"Reference","previous_headings":"","what":"Arguments","title":"Retourne l'attachment id de l'objet — get_job_id","text":"data un objet dido_attachment ou une chaine","code":""},{"path":"https://mtes-mct.github.io/didoscalim/reference/get_job_id.html","id":"valeur-de-retour","dir":"Reference","previous_headings":"","what":"Valeur de retour","title":"Retourne l'attachment id de l'objet — get_job_id","text":"le rid de l'attachment","code":""},{"path":"https://mtes-mct.github.io/didoscalim/reference/get_job_id.html","id":"ref-examples","dir":"Reference","previous_headings":"","what":"Exemples","title":"Retourne l'attachment id de l'objet — get_job_id","text":"","code":"j <- list_jobs()[1, ] get_job_id(j) #> [1] 1"},{"path":"https://mtes-mct.github.io/didoscalim/reference/get_work_env.html","id":null,"dir":"Reference","previous_headings":"","what":"Récupère l'environnement utilisé — get_work_env","title":"Récupère l'environnement utilisé — get_work_env","text":"Si aucun environnement n'été fixé par set_work_env(), get_work_env() retournera le premier environnement configuré en suivant l'ordre : DEV, PREPROD, ECOLE. Il ne fixera jamais PROD implicitement.","code":""},{"path":"https://mtes-mct.github.io/didoscalim/reference/get_work_env.html","id":"ref-usage","dir":"Reference","previous_headings":"","what":"Utilisation","title":"Récupère l'environnement utilisé — get_work_env","text":"","code":"get_work_env()"},{"path":"https://mtes-mct.github.io/didoscalim/reference/get_work_env.html","id":"valeur-de-retour","dir":"Reference","previous_headings":"","what":"Valeur de retour","title":"Récupère l'environnement utilisé — get_work_env","text":"une chaine de caractère avec l'environnement utilisé. Exemple \"ECOLE\"","code":""},{"path":"https://mtes-mct.github.io/didoscalim/reference/get_work_env.html","id":"ref-examples","dir":"Reference","previous_headings":"","what":"Exemples","title":"Récupère l'environnement utilisé — get_work_env","text":"","code":"get_work_env() #> [1] \"DEV\""},{"path":"https://mtes-mct.github.io/didoscalim/reference/list_alerts.html","id":null,"dir":"Reference","previous_headings":"","what":"Récupère les datasets devant être mis à jour — list_alerts","title":"Récupère les datasets devant être mis à jour — list_alerts","text":"Récupère les datasets devant être mis à jour","code":""},{"path":"https://mtes-mct.github.io/didoscalim/reference/list_alerts.html","id":"ref-usage","dir":"Reference","previous_headings":"","what":"Utilisation","title":"Récupère les datasets devant être mis à jour — list_alerts","text":"","code":"list_alerts()"},{"path":"https://mtes-mct.github.io/didoscalim/reference/list_alerts.html","id":"valeur-de-retour","dir":"Reference","previous_headings":"","what":"Valeur de retour","title":"Récupère les datasets devant être mis à jour — list_alerts","text":"un tibble des datasets devant être mis à jour","code":""},{"path":"https://mtes-mct.github.io/didoscalim/reference/list_alerts.html","id":"ref-examples","dir":"Reference","previous_headings":"","what":"Exemples","title":"Récupère les datasets devant être mis à jour — list_alerts","text":"","code":"list_alerts() #> # A tibble: 2 × 21 #>   id              title description topic tags  license frequency frequency_date #>   <chr>           <chr> <chr>       <chr> <lis> <chr>   <chr>     <chr>          #> 1 653b8ab94621a2… Des … Descriptio… Tran… <chr> fr-lo   annual    2022-01-10     #> 2 653b8ac75a03db… Donn… Données pa… Tran… <chr> ODbL-1… annual    2022-12-31     #> # ℹ 13 more variables: created_at <chr>, last_modified <chr>, #> #   last_update <chr>, url <chr>, attachments <list>, datafiles <list>, #> #   caution <chr>, spatial.granularity <chr>, spatial.zones <list>, #> #   temporal_coverage.end <chr>, temporal_coverage.start <chr>, #> #   organization.id <chr>, organization.title <chr>"},{"path":"https://mtes-mct.github.io/didoscalim/reference/list_attachments.html","id":null,"dir":"Reference","previous_headings":"","what":"Liste les attachments — list_attachments","title":"Liste les attachments — list_attachments","text":"Retourne la liste des attachments ou si un objet dataset est passé en argument, la liste des attachments de ce dataset.","code":""},{"path":"https://mtes-mct.github.io/didoscalim/reference/list_attachments.html","id":"ref-usage","dir":"Reference","previous_headings":"","what":"Utilisation","title":"Liste les attachments — list_attachments","text":"","code":"list_attachments(dataset = NULL)"},{"path":"https://mtes-mct.github.io/didoscalim/reference/list_attachments.html","id":"arguments","dir":"Reference","previous_headings":"","what":"Arguments","title":"Liste les attachments — list_attachments","text":"dataset optionnel, un objet dataset","code":""},{"path":"https://mtes-mct.github.io/didoscalim/reference/list_attachments.html","id":"valeur-de-retour","dir":"Reference","previous_headings":"","what":"Valeur de retour","title":"Liste les attachments — list_attachments","text":"un tibble avec les attachments","code":""},{"path":[]},{"path":"https://mtes-mct.github.io/didoscalim/reference/list_attachments.html","id":"ref-examples","dir":"Reference","previous_headings":"","what":"Exemples","title":"Liste les attachments — list_attachments","text":"","code":"# toutes les pièces jointes list_attachments() #> # A tibble: 5 × 11 #>   id      type  rid   title description created_at last_modified published url   #>   <chr>   <chr> <chr> <chr> <chr>       <chr>      <chr>         <chr>     <chr> #> 1 653b8a… docu… c249… title description 2023-10-2… 2023-10-27T1… 2023-10-… http… #> 2 653b8a… docu… a66f… title Un attachm… 2023-10-2… 2023-10-27T1… 2023-10-… http… #> 3 653b8a… hist… 5c6c… title description 2023-10-2… 2023-10-27T1… 2023-10-… http… #> 4 653b8a… docu… 9be6… Un a… Un fichier… 2023-10-2… 2023-10-27T1… 2023-10-… http… #> 5 653b8a… docu… 1118… Un f… Un fichier… 2023-10-2… 2023-10-27T1… 2023-10-… http… #> # ℹ 2 more variables: remote <lgl>, udataUrl <chr>  library(dplyr, warn.conflicts = FALSE)  # les pièces jointes d'un dataset en particulier list_datasets() %>%   filter(title == \"Un jeu de données de test\") %>%   list_attachments() #> # A tibble: 2 × 11 #>   id      type  rid   title description created_at last_modified published url   #>   <chr>   <chr> <chr> <chr> <chr>       <chr>      <chr>         <chr>     <chr> #> 1 653b8a… docu… 9be6… Un a… Un fichier… 2023-10-2… 2023-10-27T1… 2023-10-… http… #> 2 653b8a… docu… 1118… Un f… Un fichier… 2023-10-2… 2023-10-27T1… 2023-10-… http… #> # ℹ 2 more variables: remote <lgl>, udataUrl <chr>"},{"path":"https://mtes-mct.github.io/didoscalim/reference/list_datafiles.html","id":null,"dir":"Reference","previous_headings":"","what":"Liste les datafiles — list_datafiles","title":"Liste les datafiles — list_datafiles","text":"Retourne la liste des datafiles ou si un objet dataset est passé en argument, la liste des datafiles de ce dataset.","code":""},{"path":"https://mtes-mct.github.io/didoscalim/reference/list_datafiles.html","id":"ref-usage","dir":"Reference","previous_headings":"","what":"Utilisation","title":"Liste les datafiles — list_datafiles","text":"","code":"list_datafiles(dataset = NULL)"},{"path":"https://mtes-mct.github.io/didoscalim/reference/list_datafiles.html","id":"arguments","dir":"Reference","previous_headings":"","what":"Arguments","title":"Liste les datafiles — list_datafiles","text":"dataset optionnel, un objet dataset","code":""},{"path":"https://mtes-mct.github.io/didoscalim/reference/list_datafiles.html","id":"valeur-de-retour","dir":"Reference","previous_headings":"","what":"Valeur de retour","title":"Liste les datafiles — list_datafiles","text":"un tibble avec les datafiles","code":""},{"path":[]},{"path":"https://mtes-mct.github.io/didoscalim/reference/list_datafiles.html","id":"ref-examples","dir":"Reference","previous_headings":"","what":"Exemples","title":"Liste les datafiles — list_datafiles","text":"","code":"library(dplyr, warn.conflicts = FALSE) # tous les datafiles list_datafiles() #> # A tibble: 4 × 13 #>   id       rid   title description millesimes created_at last_modified published #>   <chr>    <chr> <chr> <chr>            <int> <chr>      <chr>         <chr>     #> 1 653b8ad… 5a64… titre description          2 2023-10-2… 2023-10-27T1… 2023-10-… #> 2 653b8ab… d559… titre description          3 2023-10-2… 2023-10-27T1… 2023-10-… #> 3 653b8ab… 24d5… titr… descriptio…          1 2023-10-2… 2023-10-27T1… 2023-10-… #> 4 653b8aa… ac64… Un f… Un fichier…          1 2023-10-2… 2023-10-27T1… 2023-10-… #> # ℹ 5 more variables: url <chr>, legal_notice <chr>, millesimes_info <list>, #> #   temporal_coverage.start <chr>, temporal_coverage.end <chr>  # les datafiles d'un jeu en particulier list_datasets() %>%   filter(title == \"Un jeu de données de test\") %>%   list_datafiles() #> # A tibble: 1 × 11 #>   id       rid   title description millesimes created_at last_modified published #>   <chr>    <chr> <chr> <chr>            <int> <chr>      <chr>         <chr>     #> 1 653b8aa… ac64… Un f… Un fichier…          1 2023-10-2… 2023-10-27T1… 2023-10-… #> # ℹ 3 more variables: url <chr>, legal_notice <chr>, millesimes_info <list>"},{"path":"https://mtes-mct.github.io/didoscalim/reference/list_datasets.html","id":null,"dir":"Reference","previous_headings":"","what":"Récupère la liste des datasets — list_datasets","title":"Récupère la liste des datasets — list_datasets","text":"Récupère la liste des datasets","code":""},{"path":"https://mtes-mct.github.io/didoscalim/reference/list_datasets.html","id":"ref-usage","dir":"Reference","previous_headings":"","what":"Utilisation","title":"Récupère la liste des datasets — list_datasets","text":"","code":"list_datasets()"},{"path":"https://mtes-mct.github.io/didoscalim/reference/list_datasets.html","id":"valeur-de-retour","dir":"Reference","previous_headings":"","what":"Valeur de retour","title":"Récupère la liste des datasets — list_datasets","text":"un tibble des datasets de l'utilisateur","code":""},{"path":"https://mtes-mct.github.io/didoscalim/reference/list_datasets.html","id":"ref-examples","dir":"Reference","previous_headings":"","what":"Exemples","title":"Récupère la liste des datasets — list_datasets","text":"","code":"list_datasets() #> # A tibble: 10 × 21 #>    id                 title description topic tags  license frequency created_at #>    <chr>              <chr> <chr>       <chr> <lis> <chr>   <chr>     <chr>      #>  1 653b8ad45a03db3b8… Un d… Descriptio… Tran… <chr> fr-lo   unknown   2023-10-2… #>  2 653b8ae34621a22ea… Un d… Descriptio… Tran… <chr> fr-lo   unknown   2023-10-2… #>  3 653b8ab94621a22ea… Des … Descriptio… Tran… <chr> fr-lo   annual    2023-10-2… #>  4 653b8ad4f1d5ba214… Un d… Descriptio… Tran… <chr> fr-lo   unknown   2023-10-2… #>  5 653b8aba4621a22ea… Un d… Descriptio… Tran… <chr> fr-lo   unknown   2023-10-2… #>  6 653b8ac75a03db3b8… Donn… Données pa… Tran… <chr> ODbL-1… annual    2023-10-2… #>  7 653b8ac7f1d5ba214… Donn… Données lo… Tran… <chr> fr-lo   unknown   2023-10-2… #>  8 653b8ab55a03db3b8… Donn… Données de… Tran… <chr> fr-lo   unknown   2023-10-2… #>  9 653b8ab55a03db3b8… Un d… Un dataset… Tran… <chr> fr-lo   unknown   2023-10-2… #> 10 653b8aae5a03db3b8… Un j… Un jeu de … Tran… <chr> fr-lo   unknown   2023-10-2… #> # ℹ 13 more variables: last_modified <chr>, last_update <chr>, url <chr>, #> #   attachments <list>, datafiles <list>, frequency_date <chr>, caution <chr>, #> #   spatial.granularity <chr>, spatial.zones <list>, organization.id <chr>, #> #   organization.title <chr>, temporal_coverage.end <chr>, #> #   temporal_coverage.start <chr>"},{"path":"https://mtes-mct.github.io/didoscalim/reference/list_envs.html","id":null,"dir":"Reference","previous_headings":"","what":"Liste les environnements configurés — list_envs","title":"Liste les environnements configurés — list_envs","text":"Liste les environnements configurés avec les URL associées.","code":""},{"path":"https://mtes-mct.github.io/didoscalim/reference/list_envs.html","id":"ref-usage","dir":"Reference","previous_headings":"","what":"Utilisation","title":"Liste les environnements configurés — list_envs","text":"","code":"list_envs()"},{"path":"https://mtes-mct.github.io/didoscalim/reference/list_envs.html","id":"ref-examples","dir":"Reference","previous_headings":"","what":"Exemples","title":"Liste les environnements configurés — list_envs","text":"","code":"list_envs() #> Vous avez 3 environnement(s) configuré(s) :  #> ℹ DEV : http://api.alimentation.dido.fr/v1 #> ℹ PREPROD : http://api.alimentation.dido.fr/ #> ℹ PROD : http://api.alimentation.dido.fr/v1"},{"path":"https://mtes-mct.github.io/didoscalim/reference/list_jobs.html","id":null,"dir":"Reference","previous_headings":"","what":"Récupère tous les jobs liés à un utilisateur — list_jobs","title":"Récupère tous les jobs liés à un utilisateur — list_jobs","text":"Récupère tous les jobs liés à un utilisateur","code":""},{"path":"https://mtes-mct.github.io/didoscalim/reference/list_jobs.html","id":"ref-usage","dir":"Reference","previous_headings":"","what":"Utilisation","title":"Récupère tous les jobs liés à un utilisateur — list_jobs","text":"","code":"list_jobs()"},{"path":"https://mtes-mct.github.io/didoscalim/reference/list_jobs.html","id":"valeur-de-retour","dir":"Reference","previous_headings":"","what":"Valeur de retour","title":"Récupère tous les jobs liés à un utilisateur — list_jobs","text":"un tibble de jobs","code":""},{"path":"https://mtes-mct.github.io/didoscalim/reference/list_jobs.html","id":"ref-examples","dir":"Reference","previous_headings":"","what":"Exemples","title":"Récupère tous les jobs liés à un utilisateur — list_jobs","text":"","code":"jobs <- list_jobs()"},{"path":"https://mtes-mct.github.io/didoscalim/reference/list_millesimes.html","id":null,"dir":"Reference","previous_headings":"","what":"Liste les millesimes — list_millesimes","title":"Liste les millesimes — list_millesimes","text":"Retourne un tibble de tous les millésimes ou d'un datafile en particulier","code":""},{"path":"https://mtes-mct.github.io/didoscalim/reference/list_millesimes.html","id":"ref-usage","dir":"Reference","previous_headings":"","what":"Utilisation","title":"Liste les millesimes — list_millesimes","text":"","code":"list_millesimes(data = NULL)"},{"path":"https://mtes-mct.github.io/didoscalim/reference/list_millesimes.html","id":"arguments","dir":"Reference","previous_headings":"","what":"Arguments","title":"Liste les millesimes — list_millesimes","text":"data le résultat d'une recherche par list_datafiles(), un des objets dido_job() dido_datafile() oule rid d'un datafile","code":""},{"path":"https://mtes-mct.github.io/didoscalim/reference/list_millesimes.html","id":"valeur-de-retour","dir":"Reference","previous_headings":"","what":"Valeur de retour","title":"Liste les millesimes — list_millesimes","text":"un tibble avec les millesimes du datafile","code":""},{"path":[]},{"path":"https://mtes-mct.github.io/didoscalim/reference/list_millesimes.html","id":"ref-examples","dir":"Reference","previous_headings":"","what":"Exemples","title":"Liste les millesimes — list_millesimes","text":"","code":"library(dplyr, warn.conflicts = FALSE)  datafile <- list_datafiles() %>%   filter(title == \"Un fichier de données de test\")  list_millesimes(datafile) #> # A tibble: 1 × 8 #>   id                  rid   millesime date_diffusion  rows url   headers columns #>   <chr>               <chr> <chr>     <chr>          <int> <chr> <list>  <list>  #> 1 653b8aae5a03db3b88… ac64… 2021-12   2023-10-27T10…     5 http… <df>    <df>"},{"path":"https://mtes-mct.github.io/didoscalim/reference/load_envs.html","id":null,"dir":"Reference","previous_headings":"","what":"Recharge les environnements — load_envs","title":"Recharge les environnements — load_envs","text":"Cette commande permet de recharger les environnements si vous avez modifié le Renviron. Vous devez d'abord le relire avec readRenviron()","code":""},{"path":"https://mtes-mct.github.io/didoscalim/reference/load_envs.html","id":"ref-usage","dir":"Reference","previous_headings":"","what":"Utilisation","title":"Recharge les environnements — load_envs","text":"","code":"load_envs()"},{"path":"https://mtes-mct.github.io/didoscalim/reference/load_envs.html","id":"ref-examples","dir":"Reference","previous_headings":"","what":"Exemples","title":"Recharge les environnements — load_envs","text":"","code":"readRenviron(\"~/.Renviron\") load_envs()"},{"path":"https://mtes-mct.github.io/didoscalim/reference/me.html","id":null,"dir":"Reference","previous_headings":"","what":"Récupère les informations de l'utilisateur — me","title":"Récupère les informations de l'utilisateur — me","text":"Récupère les informations de l'utilisateur","code":""},{"path":"https://mtes-mct.github.io/didoscalim/reference/me.html","id":"ref-usage","dir":"Reference","previous_headings":"","what":"Utilisation","title":"Récupère les informations de l'utilisateur — me","text":"","code":"me()"},{"path":"https://mtes-mct.github.io/didoscalim/reference/me.html","id":"valeur-de-retour","dir":"Reference","previous_headings":"","what":"Valeur de retour","title":"Récupère les informations de l'utilisateur — me","text":"Les informations de l'utilisateur","code":""},{"path":"https://mtes-mct.github.io/didoscalim/reference/me.html","id":"ref-examples","dir":"Reference","previous_headings":"","what":"Exemples","title":"Récupère les informations de l'utilisateur — me","text":"","code":"user <- me()"},{"path":"https://mtes-mct.github.io/didoscalim/reference/my_organization.html","id":null,"dir":"Reference","previous_headings":"","what":"Récupère l'ID de l'organisation de l'utilisateur. — my_organization","title":"Récupère l'ID de l'organisation de l'utilisateur. — my_organization","text":"Si l'utilisateur appartient à plusieurs organisations","code":""},{"path":"https://mtes-mct.github.io/didoscalim/reference/my_organization.html","id":"ref-usage","dir":"Reference","previous_headings":"","what":"Utilisation","title":"Récupère l'ID de l'organisation de l'utilisateur. — my_organization","text":"","code":"my_organization(name = NULL)"},{"path":"https://mtes-mct.github.io/didoscalim/reference/my_organization.html","id":"arguments","dir":"Reference","previous_headings":"","what":"Arguments","title":"Récupère l'ID de l'organisation de l'utilisateur. — my_organization","text":"name name acronym organization, default NULL","code":""},{"path":"https://mtes-mct.github.io/didoscalim/reference/my_organization.html","id":"valeur-de-retour","dir":"Reference","previous_headings":"","what":"Valeur de retour","title":"Récupère l'ID de l'organisation de l'utilisateur. — my_organization","text":"un id d'organisation","code":""},{"path":"https://mtes-mct.github.io/didoscalim/reference/my_organization.html","id":"ref-examples","dir":"Reference","previous_headings":"","what":"Exemples","title":"Récupère l'ID de l'organisation de l'utilisateur. — my_organization","text":"","code":"organization_id <- my_organization() organization_id <- my_organization(name = \"BSI\")"},{"path":"https://mtes-mct.github.io/didoscalim/reference/reexports.html","id":null,"dir":"Reference","previous_headings":"","what":"Objects exported from other packages — reexports","title":"Objects exported from other packages — reexports","text":"objects imported packages. Follow links see documentation. magrittr %>% readr default_locale, locale","code":""},{"path":"https://mtes-mct.github.io/didoscalim/reference/replace_attachment.html","id":null,"dir":"Reference","previous_headings":"","what":"Remplace un fichier annexe — replace_attachment","title":"Remplace un fichier annexe — replace_attachment","text":"Remplace un fichier annexe","code":""},{"path":"https://mtes-mct.github.io/didoscalim/reference/replace_attachment.html","id":"ref-usage","dir":"Reference","previous_headings":"","what":"Utilisation","title":"Remplace un fichier annexe — replace_attachment","text":"","code":"replace_attachment(attachment, file_name = NULL, remote_url = NULL)"},{"path":"https://mtes-mct.github.io/didoscalim/reference/replace_attachment.html","id":"arguments","dir":"Reference","previous_headings":"","what":"Arguments","title":"Remplace un fichier annexe — replace_attachment","text":"attachment un objet dido_attachment() ou un rid file_name, remote_url le nom du fichier à verser ou l'url de l'attachement.","code":""},{"path":"https://mtes-mct.github.io/didoscalim/reference/replace_attachment.html","id":"valeur-de-retour","dir":"Reference","previous_headings":"","what":"Valeur de retour","title":"Remplace un fichier annexe — replace_attachment","text":"un objet dido_attachment()","code":""},{"path":[]},{"path":"https://mtes-mct.github.io/didoscalim/reference/replace_attachment.html","id":"ref-examples","dir":"Reference","previous_headings":"","what":"Exemples","title":"Remplace un fichier annexe — replace_attachment","text":"","code":"library(dplyr, warn.conflicts = FALSE)  dataset <- list_datasets() %>%   filter(title == \"Un jeu de données de test\")  attachment <- list_attachments(dataset) %>%   filter(title == \"Un autre fichier annexe\")  replace_attachment(   attachment = attachment,   file_name = dido_example(\"attachment.txt\") )"},{"path":"https://mtes-mct.github.io/didoscalim/reference/replace_millesime.html","id":null,"dir":"Reference","previous_headings":"","what":"Remplacer les données d'un millésime — replace_millesime","title":"Remplacer les données d'un millésime — replace_millesime","text":"Cette méthode remplace les données d'un millésime en conservant son identifiant.","code":""},{"path":"https://mtes-mct.github.io/didoscalim/reference/replace_millesime.html","id":"ref-usage","dir":"Reference","previous_headings":"","what":"Utilisation","title":"Remplacer les données d'un millésime — replace_millesime","text":"","code":"replace_millesime(   datafile,   file_name,   millesime,   date_diffusion = format(Sys.time(), \"%Y-%m-%d %H:%M:%S\") )"},{"path":"https://mtes-mct.github.io/didoscalim/reference/replace_millesime.html","id":"arguments","dir":"Reference","previous_headings":"","what":"Arguments","title":"Remplacer les données d'un millésime — replace_millesime","text":"datafile un objet dido_datafile obtenu par get_datafile() file_name le nom du fichier à charger millesime le millesime (AAAA-MM). Par défaut AAAA-MM avec l'année courante et le mois courant date_diffusion (optionnel) les date et heure auxquelles le fichier devra être rendu accessible à la diffusion. Ce paramètre est au format \"AAAA-MM-JJ HH:MM:SS\" (ou ISO8601 si vous préférez). Si la timezone n'est pas précisée, la timezone de l'ordinateur local est utilisée. Si cette date/heure est dans le passé, les données sont immédiatement accessibles, si elle est dans le futur, les données ne seront accessibles qu'à cette date/heure. Si ce paramètre est non précisé prend la date/heure courante, les données sont donc immédiatement accessibles.","code":""},{"path":"https://mtes-mct.github.io/didoscalim/reference/replace_millesime.html","id":"valeur-de-retour","dir":"Reference","previous_headings":"","what":"Valeur de retour","title":"Remplacer les données d'un millésime — replace_millesime","text":"un objet dido_job()","code":""},{"path":[]},{"path":"https://mtes-mct.github.io/didoscalim/reference/replace_millesime.html","id":"ref-examples","dir":"Reference","previous_headings":"","what":"Exemples","title":"Remplacer les données d'un millésime — replace_millesime","text":"","code":"library(dplyr, warn.conflicts = FALSE)  datafile <- list_datafiles() %>%   filter(title == \"Un fichier de données de test\")  millesime <- replace_millesime(   datafile = datafile,   file_name = dido_example(\"augmente.csv\"),   millesime = \"2021-12\" )"},{"path":"https://mtes-mct.github.io/didoscalim/reference/set_work_env.html","id":null,"dir":"Reference","previous_headings":"","what":"Fixe l'environnement DiDo à utiliser — set_work_env","title":"Fixe l'environnement DiDo à utiliser — set_work_env","text":"Fixe l'environnement DiDo à utiliser","code":""},{"path":"https://mtes-mct.github.io/didoscalim/reference/set_work_env.html","id":"ref-usage","dir":"Reference","previous_headings":"","what":"Utilisation","title":"Fixe l'environnement DiDo à utiliser — set_work_env","text":"","code":"set_work_env(env_name = NULL, .envir = parent.frame())"},{"path":"https://mtes-mct.github.io/didoscalim/reference/set_work_env.html","id":"arguments","dir":"Reference","previous_headings":"","what":"Arguments","title":"Fixe l'environnement DiDo à utiliser — set_work_env","text":"env_name le nom de l'environnement à utiliser parmi PROD, ECOLE, PREPROD, DEV et suivant ce que vous avez configuré. Si env_name n'est pas passé, set_didoscalim_work_env() choisira le premier environnement configuré parmi DEV, PREPROD et ECOLE mais jamais PROD.","code":""},{"path":"https://mtes-mct.github.io/didoscalim/reference/set_work_env.html","id":"ref-examples","dir":"Reference","previous_headings":"","what":"Exemples","title":"Fixe l'environnement DiDo à utiliser — set_work_env","text":"","code":"set_work_env(\"DEV\")  set_work_env(\"PROD\")  set_work_env()"},{"path":"https://mtes-mct.github.io/didoscalim/reference/update_attachment.html","id":null,"dir":"Reference","previous_headings":"","what":"Mettre à jour une pièce jointe. — update_attachment","title":"Mettre à jour une pièce jointe. — update_attachment","text":"Mettre à jour une pièce jointe.","code":""},{"path":"https://mtes-mct.github.io/didoscalim/reference/update_attachment.html","id":"ref-usage","dir":"Reference","previous_headings":"","what":"Utilisation","title":"Mettre à jour une pièce jointe. — update_attachment","text":"","code":"update_attachment(attachment)"},{"path":"https://mtes-mct.github.io/didoscalim/reference/update_attachment.html","id":"arguments","dir":"Reference","previous_headings":"","what":"Arguments","title":"Mettre à jour une pièce jointe. — update_attachment","text":"attachment un objet attachment retourné par get_attachment() modifié par l'utilisateur","code":""},{"path":"https://mtes-mct.github.io/didoscalim/reference/update_attachment.html","id":"valeur-de-retour","dir":"Reference","previous_headings":"","what":"Valeur de retour","title":"Mettre à jour une pièce jointe. — update_attachment","text":"un objet dido_attachment()","code":""},{"path":[]},{"path":"https://mtes-mct.github.io/didoscalim/reference/update_attachment.html","id":"ref-examples","dir":"Reference","previous_headings":"","what":"Exemples","title":"Mettre à jour une pièce jointe. — update_attachment","text":"","code":"att <- list_attachments()[1, ] dataset <- att$id attachment <- get_attachment(list_attachments()[1, ], dataset = dataset) attachment$title <- \"un nouveau titre\" update_attachment(attachment)"},{"path":"https://mtes-mct.github.io/didoscalim/reference/update_datafile.html","id":null,"dir":"Reference","previous_headings":"","what":"Mettre à jour un les métadonnées d'un datafile. — update_datafile","title":"Mettre à jour un les métadonnées d'un datafile. — update_datafile","text":"Mettre à jour un les métadonnées d'un datafile.","code":""},{"path":"https://mtes-mct.github.io/didoscalim/reference/update_datafile.html","id":"ref-usage","dir":"Reference","previous_headings":"","what":"Utilisation","title":"Mettre à jour un les métadonnées d'un datafile. — update_datafile","text":"","code":"update_datafile(datafile)"},{"path":"https://mtes-mct.github.io/didoscalim/reference/update_datafile.html","id":"arguments","dir":"Reference","previous_headings":"","what":"Arguments","title":"Mettre à jour un les métadonnées d'un datafile. — update_datafile","text":"datafile un objet datafile retourné par get_datafile() modifié par l'utilisateur","code":""},{"path":"https://mtes-mct.github.io/didoscalim/reference/update_datafile.html","id":"valeur-de-retour","dir":"Reference","previous_headings":"","what":"Valeur de retour","title":"Mettre à jour un les métadonnées d'un datafile. — update_datafile","text":"un objet dido_job() invisible","code":""},{"path":[]},{"path":"https://mtes-mct.github.io/didoscalim/reference/update_datafile.html","id":"ref-examples","dir":"Reference","previous_headings":"","what":"Exemples","title":"Mettre à jour un les métadonnées d'un datafile. — update_datafile","text":"","code":"library(dplyr, warn.conflicts = FALSE)  datafile <- list_datafiles() %>%   filter(title == \"Un fichier de données de test\") %>%   get_datafile() %>%   clean_metadata()  datafile$temporal_coverage$start <- \"2022-01-01\" datafile$temporal_coverage$end <- \"2023-12-31\"  update_datafile(datafile)"},{"path":"https://mtes-mct.github.io/didoscalim/reference/update_dataset.html","id":null,"dir":"Reference","previous_headings":"","what":"Met à jour les metadonnées d'un dataset — update_dataset","title":"Met à jour les metadonnées d'un dataset — update_dataset","text":"Cette fonction permet de mettre à jour les métadonnées d'un dataset comme, par exemple, la date de fin de couverture temporelle.","code":""},{"path":"https://mtes-mct.github.io/didoscalim/reference/update_dataset.html","id":"ref-usage","dir":"Reference","previous_headings":"","what":"Utilisation","title":"Met à jour les metadonnées d'un dataset — update_dataset","text":"","code":"update_dataset(dataset)"},{"path":"https://mtes-mct.github.io/didoscalim/reference/update_dataset.html","id":"arguments","dir":"Reference","previous_headings":"","what":"Arguments","title":"Met à jour les metadonnées d'un dataset — update_dataset","text":"dataset un objet dido_dataset modifié","code":""},{"path":"https://mtes-mct.github.io/didoscalim/reference/update_dataset.html","id":"valeur-de-retour","dir":"Reference","previous_headings":"","what":"Valeur de retour","title":"Met à jour les metadonnées d'un dataset — update_dataset","text":"un objet dido_dataset()","code":""},{"path":[]},{"path":"https://mtes-mct.github.io/didoscalim/reference/update_dataset.html","id":"ref-examples","dir":"Reference","previous_headings":"","what":"Exemples","title":"Met à jour les metadonnées d'un dataset — update_dataset","text":"","code":"library(dplyr, warn.conflicts = FALSE)  dataset <- list_datasets() %>%   filter(title == \"Un jeu de données de test\") %>%   get_dataset() %>%   clean_metadata()  dataset$temporal_coverage$start <- \"2020-01-01\" dataset$temporal_coverage$end <- \"2020-12-31\" update_dataset(dataset)  update_dataset(dataset)"},{"path":"https://mtes-mct.github.io/didoscalim/reference/wait_for_job.html","id":null,"dir":"Reference","previous_headings":"","what":"Attend la fin d'un job d'intégration — wait_for_job","title":"Attend la fin d'un job d'intégration — wait_for_job","text":"Attend la fin d'un job d'intégration","code":""},{"path":"https://mtes-mct.github.io/didoscalim/reference/wait_for_job.html","id":"ref-usage","dir":"Reference","previous_headings":"","what":"Utilisation","title":"Attend la fin d'un job d'intégration — wait_for_job","text":"","code":"wait_for_job(data)"},{"path":"https://mtes-mct.github.io/didoscalim/reference/wait_for_job.html","id":"arguments","dir":"Reference","previous_headings":"","what":"Arguments","title":"Attend la fin d'un job d'intégration — wait_for_job","text":"data l'id du job","code":""},{"path":"https://mtes-mct.github.io/didoscalim/reference/wait_for_job.html","id":"valeur-de-retour","dir":"Reference","previous_headings":"","what":"Valeur de retour","title":"Attend la fin d'un job d'intégration — wait_for_job","text":"les données du job","code":""},{"path":"https://mtes-mct.github.io/didoscalim/reference/wait_for_job.html","id":"ref-examples","dir":"Reference","previous_headings":"","what":"Exemples","title":"Attend la fin d'un job d'intégration — wait_for_job","text":"","code":"job <- list_jobs()[1, ] %>%   wait_for_job()"},{"path":"https://mtes-mct.github.io/didoscalim/news/index.html","id":"didoscalim-0149000","dir":"Changelog","previous_headings":"","what":"didoscalim 0.1.4.9000","title":"didoscalim 0.1.4.9000","text":"évolutions : remplace la comparaison des titres dans add_or_update_* par une comparaison sur une chaine nettoyée et possibilité d’utiliser sa propre fonction de comparaison (voir vignette(\"complements-sur-les-mises--jour\")) ajout d’une fonction didoscalim_update_only() qui bloque la création dans les fonctions add_or_update_dataset(), add_or_update_datafile() et add_or_update_attachment(). Voir un exemple dans vignette(\"complements-sur-les-mises--jour\")) ajout de la gestion des types d’attachements (par défaut “documentation”) dans add_or_update_attachment() ajout d’un warning quand l’utilisation d’un type nombre est détecté dans un fichier CSV augmenté. documentation : ajout d’un passage sur comment limiter le temps de la méthode dido_csv() quand utilise de fichier source volumineux dans la vignette(\"csv-augmente\") bugfixes : corrige un bug avec read_delim et R 4.3.1 corrige un bug dans l’affichage de la barre de progression de téléchargement","code":""},{"path":"https://mtes-mct.github.io/didoscalim/news/index.html","id":"didoscalim-0139000","dir":"Changelog","previous_headings":"","what":"didoscalim 0.1.3.9000","title":"didoscalim 0.1.3.9000","text":"Cette version ajoute une option replace au paramètre on_existing_millesime de la méthode add_or_update_datafile qui permet de remplacer le millésime en conservant le même identifiant de millésime. évolutions : ajout d’une option replace au paramètre on_existing_millesime bugfixes : corrige des incohérences sur les paramètres de type date/times (published et date_diffusion). Ces dates times sont maintenant supportés en “AAAA-MM-JJ HH:MM:SS” par défaut même si tous les formats ISO8601 sont supportés. supprime les messages d’avertissement de conversion de time zone documentation : supprime une vignette obsolète. divers : utilise une expectation expect_datetime pour vérifier les datetimes ajoute une barre de progression pour l’upload d’un fichier","code":""},{"path":"https://mtes-mct.github.io/didoscalim/news/index.html","id":"didoscalim-0129000","dir":"Changelog","previous_headings":"","what":"didoscalim 0.1.2.9000","title":"didoscalim 0.1.2.9000","text":"bugfix : correction d’un bug qui empèche l’installation quand l’environnement n’est pas configuré","code":""},{"path":"https://mtes-mct.github.io/didoscalim/news/index.html","id":"didoscalim-0119000","dir":"Changelog","previous_headings":"","what":"didoscalim 0.1.1.9000","title":"didoscalim 0.1.1.9000","text":"bugfixes : correction d’un bug sur les mises à jour de zones et de granularité.","code":""},{"path":"https://mtes-mct.github.io/didoscalim/news/index.html","id":"didoscalim-0109000","dir":"Changelog","previous_headings":"","what":"didoscalim 0.1.0.9000","title":"didoscalim 0.1.0.9000","text":"Cette nouvelle version ajoute les méthodes de haut niveau : add_or_update_dataset(), add_or_update_datafile() et add_or_update_attachment() qui permettent de mettre à jour respectivement un dataset, datafile ou un attachment, s’il existe et de l’ajouter s’il n’existe pas. check_import_file() qui permet de tester rapidement si un fichier de données est valide au sens de DiDo. évolutions : ajout des méthodes add_or_update_* ajout d’une méthode check_import_file pour valider un fichier dido_csv() permet de changer le nom de la variable ajout des méthodes delete-* bugfixes : correction d’un bug sur les noms de variables avec une espace correction d’un bug dans les tests des temporal_coverage retournés par l’API ajout de retry des requêtes en cas d’erreur 500 erreur d’argument dans replace_attachment bug sur des champs supplémentaires dans la route update de l’API divers : ajout de la version de didoscalim dans le user agent refactor: utilise les options pour l’environnement utilisé refactor: ajout de helpers : abort_if_not_one_line, check_mandatory_arguments ajout de tests","code":""},{"path":"https://mtes-mct.github.io/didoscalim/news/index.html","id":"didoscalim-0039000","dir":"Changelog","previous_headings":"","what":"didoscalim 0.0.3.9000","title":"didoscalim 0.0.3.9000","text":"bugfix dans la gestion de la timezone de la date de diffusion refactor la gestion de dates + styler documentation","code":""},{"path":"https://mtes-mct.github.io/didoscalim/news/index.html","id":"didoscalim-0029000","dir":"Changelog","previous_headings":"","what":"didoscalim 0.0.2.9000","title":"didoscalim 0.0.2.9000","text":"ajout des paramètres expressions rationnelles dans dido_csv() ajout de l’évaluation {} dans le champ description documentation de toutes les fonctions tous les exemples sont testés bugfix: erreur quand le dataframe passée à dido_csv contient des colonnes autre que chr","code":""},{"path":"https://mtes-mct.github.io/didoscalim/news/index.html","id":"didoscalim-0019000","dir":"Changelog","previous_headings":"","what":"didoscalim 0.0.1.9000","title":"didoscalim 0.0.1.9000","text":"Première version publiée","code":""}]
