---
title: "Charger des données"
output: rmarkdown::html_vignette
vignette: >
  %\VignetteIndexEntry{Charger des données}
  %\VignetteEngine{knitr::rmarkdown}
  %\VignetteEncoding{UTF-8}
---

```{r, include = FALSE}
knitr::opts_chunk$set(
  collapse = TRUE,
  comment = "#>"
)
```

```{r setup}
library(didoscalim)
library(magrittr)
library(dplyr, quietly = TRUE, warn.conflicts = FALSE)
```

```{r, echo=FALSE, results = FALSE, message = FALSE}
# bugfix pour check()
library(stringr)
library(purrr, warn.conflicts = FALSE)
list_datasets() %>% 
  filter(str_detect(title, "Données.*fictive")) %>%
  pwalk(~ delete_dataset(.))
```

Cette documentation est obsolète, référez-vous à la vignette [charger et mettre
à jour des données](charger-et-mettre-a-jour-des-donnees.html).


## Comment utiliser didoscalim

Afin d'éviter les erreurs de manipulation, il est conseillé de préparer ses
scripts de chargement sur l'environnement `ECOLE` et de les passer après sur
`PROD`. Vous trouverez plus d'info dans [la vignette sur les
environnements](les-environnements.html).

## Créer un dataset

Créer un dataset avec les caractéristiques suivantes :

```{r}
dataset <- add_dataset(
  title = "Données de consommation fictive",
  description = "test",
  topic = "Transports",
  temporal_coverage_start = "2020-01-01",
  temporal_coverage_end = "2020-12-31",
  frequency = "annual",
  frequency_date = "2021-10-10"
)
```

### créer un datafile dans ce dataset

```{r}
add_datafile(
  dataset = dataset,
  file_name = "augmente.csv",
  title = "Données de consommation fictive – chaleur et froid – année 2020",
  description = "Consommations annuelles et nombre de points de livraison",
  temporal_coverage_start = "2020-01-01",
  temporal_coverage_end = "2020-12-31",
  millesime = "2021-10"
)
```
### ajouter un fichier annexe

```{r}
add_attachment(
    dataset = dataset,
    file_name = 'annexe.txt',
    title = "Liste des variables - chaleur et froid",
    description = "Détail des variables - fichiers chaleur et froid"
)
```

